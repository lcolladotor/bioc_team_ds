<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>14 Organizing your work | R/Bioconductor-powered Team Data Science</title>
  <meta name="description" content="14 Organizing your work | R/Bioconductor-powered Team Data Science" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="14 Organizing your work | R/Bioconductor-powered Team Data Science" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="lcolladotor/bioc_team_ds" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="14 Organizing your work | R/Bioconductor-powered Team Data Science" />
  
  
  

<meta name="author" content="Leonardo Collado-Torres" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="icon_32.png" type="image/x-icon" />
<link rel="prev" href="project-feedback.html"/>
<link rel="next" href="writing-papers.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#youtube"><i class="fa fa-check"></i>YouTube</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#libd-rstats-club"><i class="fa fa-check"></i>LIBD rstats club</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#team-journal-club"><i class="fa fa-check"></i>Team journal club</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#libd-and-team-bootcamps"><i class="fa fa-check"></i>LIBD and team bootcamps</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#code-of-conduct"><i class="fa fa-check"></i>Code of conduct</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#twitter"><i class="fa fa-check"></i>Twitter</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="onboarding.html"><a href="onboarding.html"><i class="fa fa-check"></i><b>1</b> Onboarding</a>
<ul>
<li class="chapter" data-level="1.1" data-path="onboarding.html"><a href="onboarding.html#basic-work-expectations"><i class="fa fa-check"></i><b>1.1</b> Basic work expectations</a></li>
<li class="chapter" data-level="1.2" data-path="onboarding.html"><a href="onboarding.html#background-knowledge"><i class="fa fa-check"></i><b>1.2</b> Background knowledge</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="onboarding.html"><a href="onboarding.html#rna-seq"><i class="fa fa-check"></i><b>1.2.1</b> RNA-seq</a></li>
<li class="chapter" data-level="1.2.2" data-path="onboarding.html"><a href="onboarding.html#dnam"><i class="fa fa-check"></i><b>1.2.2</b> DNAm</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="onboarding.html"><a href="onboarding.html#commonly-used-software"><i class="fa fa-check"></i><b>1.3</b> Commonly used software</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="onboarding.html"><a href="onboarding.html#bash-and-linux"><i class="fa fa-check"></i><b>1.3.1</b> <code>bash</code> and <code>linux</code></a></li>
<li class="chapter" data-level="1.3.2" data-path="onboarding.html"><a href="onboarding.html#r"><i class="fa fa-check"></i><b>1.3.2</b> <code>R</code></a></li>
<li class="chapter" data-level="1.3.3" data-path="onboarding.html"><a href="onboarding.html#python"><i class="fa fa-check"></i><b>1.3.3</b> <code>python</code></a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="onboarding.html"><a href="onboarding.html#team-communication"><i class="fa fa-check"></i><b>1.4</b> Team communication</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="onboarding.html"><a href="onboarding.html#zoom"><i class="fa fa-check"></i><b>1.4.1</b> Zoom</a></li>
<li class="chapter" data-level="1.4.2" data-path="onboarding.html"><a href="onboarding.html#github"><i class="fa fa-check"></i><b>1.4.2</b> GitHub</a></li>
<li class="chapter" data-level="1.4.3" data-path="onboarding.html"><a href="onboarding.html#slack"><i class="fa fa-check"></i><b>1.4.3</b> Slack</a></li>
<li class="chapter" data-level="1.4.4" data-path="onboarding.html"><a href="onboarding.html#team-calendar"><i class="fa fa-check"></i><b>1.4.4</b> Team calendar</a></li>
<li class="chapter" data-level="1.4.5" data-path="onboarding.html"><a href="onboarding.html#academic-twitter"><i class="fa fa-check"></i><b>1.4.5</b> Academic Twitter</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="onboarding.html"><a href="onboarding.html#laptop-setup"><i class="fa fa-check"></i><b>1.5</b> Laptop setup</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="onboarding.html"><a href="onboarding.html#jhpce"><i class="fa fa-check"></i><b>1.5.1</b> JHPCE</a></li>
<li class="chapter" data-level="1.5.2" data-path="onboarding.html"><a href="onboarding.html#macos"><i class="fa fa-check"></i><b>1.5.2</b> macOS</a></li>
<li class="chapter" data-level="1.5.3" data-path="onboarding.html"><a href="onboarding.html#winos"><i class="fa fa-check"></i><b>1.5.3</b> winOS</a></li>
<li class="chapter" data-level="1.5.4" data-path="onboarding.html"><a href="onboarding.html#any-os"><i class="fa fa-check"></i><b>1.5.4</b> Any OS</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="onboarding.html"><a href="onboarding.html#commonly-used-software-1"><i class="fa fa-check"></i><b>1.6</b> Commonly used software</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="onboarding.html"><a href="onboarding.html#bioconductor"><i class="fa fa-check"></i><b>1.6.1</b> Bioconductor</a></li>
<li class="chapter" data-level="1.6.2" data-path="onboarding.html"><a href="onboarding.html#lab-software"><i class="fa fa-check"></i><b>1.6.2</b> Lab software</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="onboarding.html"><a href="onboarding.html#meetings-of-potential-interest"><i class="fa fa-check"></i><b>1.7</b> Meetings of potential interest</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="onboarding.html"><a href="onboarding.html#conferences"><i class="fa fa-check"></i><b>1.7.1</b> Conferences</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="onboarding.html"><a href="onboarding.html#eating-nearby"><i class="fa fa-check"></i><b>1.8</b> Eating nearby</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="onboarding.html"><a href="onboarding.html#food-trucks"><i class="fa fa-check"></i><b>1.8.1</b> Food trucks</a></li>
<li class="chapter" data-level="1.8.2" data-path="onboarding.html"><a href="onboarding.html#other"><i class="fa fa-check"></i><b>1.8.2</b> Other</a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="onboarding.html"><a href="onboarding.html#baltimore-life"><i class="fa fa-check"></i><b>1.9</b> Baltimore Life</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-science-guidance-sessions.html"><a href="data-science-guidance-sessions.html"><i class="fa fa-check"></i><b>2</b> Data Science guidance sessions</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-science-guidance-sessions.html"><a href="data-science-guidance-sessions.html#interaction-rules"><i class="fa fa-check"></i><b>2.1</b> Interaction rules</a></li>
<li class="chapter" data-level="2.2" data-path="data-science-guidance-sessions.html"><a href="data-science-guidance-sessions.html#help-us-help-you"><i class="fa fa-check"></i><b>2.2</b> Help us help you</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-science-guidance-sessions.html"><a href="data-science-guidance-sessions.html#framing-a-question"><i class="fa fa-check"></i><b>2.2.1</b> Framing a question</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-science-guidance-sessions.html"><a href="data-science-guidance-sessions.html#useful-information"><i class="fa fa-check"></i><b>2.2.2</b> Useful information</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-science-guidance-sessions.html"><a href="data-science-guidance-sessions.html#sign-up"><i class="fa fa-check"></i><b>2.3</b> Sign up</a></li>
<li class="chapter" data-level="2.4" data-path="data-science-guidance-sessions.html"><a href="data-science-guidance-sessions.html#dsgs-session-reports"><i class="fa fa-check"></i><b>2.4</b> DSgs session reports</a></li>
<li class="chapter" data-level="2.5" data-path="data-science-guidance-sessions.html"><a href="data-science-guidance-sessions.html#become-a-dsgs-guide"><i class="fa fa-check"></i><b>2.5</b> Become a DSgs guide</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="how-to-ask-for-help.html"><a href="how-to-ask-for-help.html"><i class="fa fa-check"></i><b>3</b> How to ask for help</a>
<ul>
<li class="chapter" data-level="3.1" data-path="how-to-ask-for-help.html"><a href="how-to-ask-for-help.html#general-guidelines"><i class="fa fa-check"></i><b>3.1</b> General guidelines</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="how-to-ask-for-help.html"><a href="how-to-ask-for-help.html#avoid-screenshots"><i class="fa fa-check"></i><b>3.1.1</b> Avoid screenshots</a></li>
<li class="chapter" data-level="3.1.2" data-path="how-to-ask-for-help.html"><a href="how-to-ask-for-help.html#reproducible-code"><i class="fa fa-check"></i><b>3.1.2</b> Reproducible code</a></li>
<li class="chapter" data-level="3.1.3" data-path="how-to-ask-for-help.html"><a href="how-to-ask-for-help.html#use-reprex"><i class="fa fa-check"></i><b>3.1.3</b> Use reprex</a></li>
<li class="chapter" data-level="3.1.4" data-path="how-to-ask-for-help.html"><a href="how-to-ask-for-help.html#use-markdown-syntax"><i class="fa fa-check"></i><b>3.1.4</b> Use Markdown syntax</a></li>
<li class="chapter" data-level="3.1.5" data-path="how-to-ask-for-help.html"><a href="how-to-ask-for-help.html#r-session-information"><i class="fa fa-check"></i><b>3.1.5</b> R session information</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="how-to-ask-for-help.html"><a href="how-to-ask-for-help.html#learning-from-our-search-history"><i class="fa fa-check"></i><b>3.2</b> Learning from our search history</a></li>
<li class="chapter" data-level="3.3" data-path="how-to-ask-for-help.html"><a href="how-to-ask-for-help.html#bioconductor-support-website"><i class="fa fa-check"></i><b>3.3</b> Bioconductor Support website</a></li>
<li class="chapter" data-level="3.4" data-path="how-to-ask-for-help.html"><a href="how-to-ask-for-help.html#rstudio-community-website"><i class="fa fa-check"></i><b>3.4</b> RStudio Community website</a></li>
<li class="chapter" data-level="3.5" data-path="how-to-ask-for-help.html"><a href="how-to-ask-for-help.html#github-1"><i class="fa fa-check"></i><b>3.5</b> GitHub</a></li>
<li class="chapter" data-level="3.6" data-path="how-to-ask-for-help.html"><a href="how-to-ask-for-help.html#github-issues"><i class="fa fa-check"></i><b>3.6</b> GitHub issues</a></li>
<li class="chapter" data-level="3.7" data-path="how-to-ask-for-help.html"><a href="how-to-ask-for-help.html#mailing-lists"><i class="fa fa-check"></i><b>3.7</b> Mailing lists</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="how-to-ask-for-help.html"><a href="how-to-ask-for-help.html#jhpce-1"><i class="fa fa-check"></i><b>3.7.1</b> JHPCE</a></li>
<li class="chapter" data-level="3.7.2" data-path="how-to-ask-for-help.html"><a href="how-to-ask-for-help.html#bioc-devel"><i class="fa fa-check"></i><b>3.7.2</b> Bioc-devel</a></li>
<li class="chapter" data-level="3.7.3" data-path="how-to-ask-for-help.html"><a href="how-to-ask-for-help.html#r-sig-mac"><i class="fa fa-check"></i><b>3.7.3</b> R-Sig-Mac</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="how-to-ask-for-help.html"><a href="how-to-ask-for-help.html#slack-1"><i class="fa fa-check"></i><b>3.8</b> Slack</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="how-to-ask-for-help.html"><a href="how-to-ask-for-help.html#jhulibd"><i class="fa fa-check"></i><b>3.8.1</b> JHU/LIBD</a></li>
<li class="chapter" data-level="3.8.2" data-path="how-to-ask-for-help.html"><a href="how-to-ask-for-help.html#bioconductor-1"><i class="fa fa-check"></i><b>3.8.2</b> Bioconductor</a></li>
<li class="chapter" data-level="3.8.3" data-path="how-to-ask-for-help.html"><a href="how-to-ask-for-help.html#r-ladies-baltimore"><i class="fa fa-check"></i><b>3.8.3</b> R-Ladies Baltimore</a></li>
<li class="chapter" data-level="3.8.4" data-path="how-to-ask-for-help.html"><a href="how-to-ask-for-help.html#miscellaneous"><i class="fa fa-check"></i><b>3.8.4</b> Miscellaneous</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Bootcamps</b></span></li>
<li class="chapter" data-level="4" data-path="rbioconductor-data-science-bootcamps.html"><a href="rbioconductor-data-science-bootcamps.html"><i class="fa fa-check"></i><b>4</b> R/Bioconductor Data Science bootcamps</a>
<ul>
<li class="chapter" data-level="4.1" data-path="rbioconductor-data-science-bootcamps.html"><a href="rbioconductor-data-science-bootcamps.html#overview-videos"><i class="fa fa-check"></i><b>4.1</b> Overview videos</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="rbioconductor-data-science-bootcamps.html"><a href="rbioconductor-data-science-bootcamps.html#r-and-rstudio"><i class="fa fa-check"></i><b>4.1.1</b> R and RStudio</a></li>
<li class="chapter" data-level="4.1.2" data-path="rbioconductor-data-science-bootcamps.html"><a href="rbioconductor-data-science-bootcamps.html#bioconductor-2"><i class="fa fa-check"></i><b>4.1.2</b> Bioconductor</a></li>
<li class="chapter" data-level="4.1.3" data-path="rbioconductor-data-science-bootcamps.html"><a href="rbioconductor-data-science-bootcamps.html#ggplot2-r-graphics"><i class="fa fa-check"></i><b>4.1.3</b> ggplot2 R graphics</a></li>
<li class="chapter" data-level="4.1.4" data-path="rbioconductor-data-science-bootcamps.html"><a href="rbioconductor-data-science-bootcamps.html#submitting-jobs-at-jhpce"><i class="fa fa-check"></i><b>4.1.4</b> Submitting jobs at JHPCE</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="rbioconductor-data-science-bootcamps.html"><a href="rbioconductor-data-science-bootcamps.html#libd-bootcamps"><i class="fa fa-check"></i><b>4.2</b> LIBD bootcamps</a></li>
<li class="chapter" data-level="4.3" data-path="rbioconductor-data-science-bootcamps.html"><a href="rbioconductor-data-science-bootcamps.html#team-bootcamps"><i class="fa fa-check"></i><b>4.3</b> Team bootcamps</a></li>
<li class="chapter" data-level="4.4" data-path="rbioconductor-data-science-bootcamps.html"><a href="rbioconductor-data-science-bootcamps.html#bootcamp-source-materials"><i class="fa fa-check"></i><b>4.4</b> Bootcamp source materials</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="rbioconductor-data-science-bootcamps.html"><a href="rbioconductor-data-science-bootcamps.html#main-materials"><i class="fa fa-check"></i><b>4.4.1</b> Main materials</a></li>
<li class="chapter" data-level="4.4.2" data-path="rbioconductor-data-science-bootcamps.html"><a href="rbioconductor-data-science-bootcamps.html#courses"><i class="fa fa-check"></i><b>4.4.2</b> Courses</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="how-to-be-a-modern-scientist.html"><a href="how-to-be-a-modern-scientist.html"><i class="fa fa-check"></i><b>5</b> How to be a modern scientist</a>
<ul>
<li class="chapter" data-level="5.1" data-path="how-to-be-a-modern-scientist.html"><a href="how-to-be-a-modern-scientist.html#bootcamp-session"><i class="fa fa-check"></i><b>5.1</b> Bootcamp session</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="what-they-forgot-to-teach-you-about-r.html"><a href="what-they-forgot-to-teach-you-about-r.html"><i class="fa fa-check"></i><b>6</b> What they forgot to teach you about R</a>
<ul>
<li class="chapter" data-level="6.1" data-path="what-they-forgot-to-teach-you-about-r.html"><a href="what-they-forgot-to-teach-you-about-r.html#bootcamp-sessions"><i class="fa fa-check"></i><b>6.1</b> Bootcamp sessions</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="the-elements-of-data-analytic-style.html"><a href="the-elements-of-data-analytic-style.html"><i class="fa fa-check"></i><b>7</b> The Elements of Data Analytic Style</a>
<ul>
<li class="chapter" data-level="7.1" data-path="the-elements-of-data-analytic-style.html"><a href="the-elements-of-data-analytic-style.html#bootcamp-session-1"><i class="fa fa-check"></i><b>7.1</b> Bootcamp session</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="cbds.html"><a href="cbds.html"><i class="fa fa-check"></i><b>8</b> CBDS</a>
<ul>
<li class="chapter" data-level="8.1" data-path="cbds.html"><a href="cbds.html#bootcamp-session-2"><i class="fa fa-check"></i><b>8.1</b> Bootcamp session</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="building-tidy-tools.html"><a href="building-tidy-tools.html"><i class="fa fa-check"></i><b>9</b> Building Tidy Tools</a>
<ul>
<li class="chapter" data-level="9.1" data-path="building-tidy-tools.html"><a href="building-tidy-tools.html#bootcamp-sessions-1"><i class="fa fa-check"></i><b>9.1</b> Bootcamp sessions</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="differential-expression-analysis.html"><a href="differential-expression-analysis.html"><i class="fa fa-check"></i><b>10</b> Differential expression analysis</a>
<ul>
<li class="chapter" data-level="10.1" data-path="differential-expression-analysis.html"><a href="differential-expression-analysis.html#bootcamp-sessions-2"><i class="fa fa-check"></i><b>10.1</b> Bootcamp sessions</a></li>
</ul></li>
<li class="part"><span><b>II Internal</b></span></li>
<li class="chapter" data-level="11" data-path="team-meetings.html"><a href="team-meetings.html"><i class="fa fa-check"></i><b>11</b> Team meetings</a>
<ul>
<li class="chapter" data-level="11.1" data-path="team-meetings.html"><a href="team-meetings.html#papers-software"><i class="fa fa-check"></i><b>11.1</b> Papers &amp; software</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="team-meetings.html"><a href="team-meetings.html#notes"><i class="fa fa-check"></i><b>11.1.1</b> Notes</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="team-meetings.html"><a href="team-meetings.html#dsgs-feedback"><i class="fa fa-check"></i><b>11.2</b> DSgs: feedback</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="team-meetings.html"><a href="team-meetings.html#notes-1"><i class="fa fa-check"></i><b>11.2.1</b> Notes</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="team-meetings.html"><a href="team-meetings.html#team-help"><i class="fa fa-check"></i><b>11.3</b> Team help</a></li>
<li class="chapter" data-level="11.4" data-path="team-meetings.html"><a href="team-meetings.html#individual-updates"><i class="fa fa-check"></i><b>11.4</b> Individual updates</a></li>
<li class="chapter" data-level="11.5" data-path="team-meetings.html"><a href="team-meetings.html#project-meetings"><i class="fa fa-check"></i><b>11.5</b> Project meetings</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="helping-others.html"><a href="helping-others.html"><i class="fa fa-check"></i><b>12</b> Helping others</a>
<ul>
<li class="chapter" data-level="12.1" data-path="helping-others.html"><a href="helping-others.html#linear-regression-example"><i class="fa fa-check"></i><b>12.1</b> Linear regression example</a></li>
<li class="chapter" data-level="12.2" data-path="helping-others.html"><a href="helping-others.html#dsgs-guides"><i class="fa fa-check"></i><b>12.2</b> DSgs guides</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="helping-others.html"><a href="helping-others.html#dsgs-guide-training"><i class="fa fa-check"></i><b>12.2.1</b> DSgs-guide training</a></li>
<li class="chapter" data-level="12.2.2" data-path="helping-others.html"><a href="helping-others.html#common-responses"><i class="fa fa-check"></i><b>12.2.2</b> Common responses</a></li>
<li class="chapter" data-level="12.2.3" data-path="helping-others.html"><a href="helping-others.html#internal-sessions-log"><i class="fa fa-check"></i><b>12.2.3</b> Internal sessions log</a></li>
<li class="chapter" data-level="12.2.4" data-path="helping-others.html"><a href="helping-others.html#getting-started"><i class="fa fa-check"></i><b>12.2.4</b> Getting started</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="helping-others.html"><a href="helping-others.html#bioconductor-support-practice-grounds"><i class="fa fa-check"></i><b>12.3</b> Bioconductor Support: practice grounds</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="helping-others.html"><a href="helping-others.html#steps-to-follow"><i class="fa fa-check"></i><b>12.3.1</b> Steps to follow</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="helping-others.html"><a href="helping-others.html#rstudio-education"><i class="fa fa-check"></i><b>12.4</b> RStudio Education</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="project-feedback.html"><a href="project-feedback.html"><i class="fa fa-check"></i><b>13</b> Project feedback</a>
<ul>
<li class="chapter" data-level="13.1" data-path="project-feedback.html"><a href="project-feedback.html#slack-2"><i class="fa fa-check"></i><b>13.1</b> Slack</a></li>
<li class="chapter" data-level="13.2" data-path="project-feedback.html"><a href="project-feedback.html#meetings"><i class="fa fa-check"></i><b>13.2</b> Meetings</a></li>
<li class="chapter" data-level="13.3" data-path="project-feedback.html"><a href="project-feedback.html#code-review"><i class="fa fa-check"></i><b>13.3</b> Code review</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="organizing-your-work.html"><a href="organizing-your-work.html"><i class="fa fa-check"></i><b>14</b> Organizing your work</a>
<ul>
<li class="chapter" data-level="14.1" data-path="organizing-your-work.html"><a href="organizing-your-work.html#jhpce-file-organization"><i class="fa fa-check"></i><b>14.1</b> JHPCE file organization</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="organizing-your-work.html"><a href="organizing-your-work.html#background-history"><i class="fa fa-check"></i><b>14.1.1</b> Background history</a></li>
<li class="chapter" data-level="14.1.2" data-path="organizing-your-work.html"><a href="organizing-your-work.html#organization-since-2021"><i class="fa fa-check"></i><b>14.1.2</b> Organization since 2021</a></li>
<li class="chapter" data-level="14.1.3" data-path="organizing-your-work.html"><a href="organizing-your-work.html#project-template"><i class="fa fa-check"></i><b>14.1.3</b> Project template</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="organizing-your-work.html"><a href="organizing-your-work.html#project-documentation"><i class="fa fa-check"></i><b>14.2</b> Project documentation</a></li>
<li class="chapter" data-level="14.3" data-path="organizing-your-work.html"><a href="organizing-your-work.html#setting-jhpce-file-permissions"><i class="fa fa-check"></i><b>14.3</b> Setting JHPCE file permissions</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="organizing-your-work.html"><a href="organizing-your-work.html#useful-commands"><i class="fa fa-check"></i><b>14.3.1</b> Useful commands</a></li>
<li class="chapter" data-level="14.3.2" data-path="organizing-your-work.html"><a href="organizing-your-work.html#dcs04-scripts"><i class="fa fa-check"></i><b>14.3.2</b> dcs04 scripts</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="organizing-your-work.html"><a href="organizing-your-work.html#moving-files-across-jhpce-disks"><i class="fa fa-check"></i><b>14.4</b> Moving files across JHPCE disks</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="organizing-your-work.html"><a href="organizing-your-work.html#qsva-example"><i class="fa fa-check"></i><b>14.4.1</b> qSVA example</a></li>
<li class="chapter" data-level="14.4.2" data-path="organizing-your-work.html"><a href="organizing-your-work.html#humanpilot-example"><i class="fa fa-check"></i><b>14.4.2</b> HumanPilot example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="writing-papers.html"><a href="writing-papers.html"><i class="fa fa-check"></i><b>15</b> Writing papers</a>
<ul>
<li class="chapter" data-level="15.1" data-path="writing-papers.html"><a href="writing-papers.html#things-to-keep-in-mind"><i class="fa fa-check"></i><b>15.1</b> Things to keep in mind</a></li>
<li class="chapter" data-level="15.2" data-path="writing-papers.html"><a href="writing-papers.html#writing-process"><i class="fa fa-check"></i><b>15.2</b> Writing process</a></li>
<li class="chapter" data-level="15.3" data-path="writing-papers.html"><a href="writing-papers.html#onedrive-publication-files"><i class="fa fa-check"></i><b>15.3</b> OneDrive: publication files</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="writing-papers.html"><a href="writing-papers.html#examples"><i class="fa fa-check"></i><b>15.3.1</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="writing-papers.html"><a href="writing-papers.html#revisions"><i class="fa fa-check"></i><b>15.4</b> Revisions</a></li>
<li class="chapter" data-level="15.5" data-path="writing-papers.html"><a href="writing-papers.html#details"><i class="fa fa-check"></i><b>15.5</b> Details</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="authorship.html"><a href="authorship.html"><i class="fa fa-check"></i><b>16</b> Authorship</a></li>
<li class="chapter" data-level="17" data-path="config-files.html"><a href="config-files.html"><i class="fa fa-check"></i><b>17</b> Config files</a>
<ul>
<li class="chapter" data-level="17.1" data-path="config-files.html"><a href="config-files.html#r-setup"><i class="fa fa-check"></i><b>17.1</b> R setup</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="config-files.html"><a href="config-files.html#r-packages"><i class="fa fa-check"></i><b>17.1.1</b> R packages</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="config-files.html"><a href="config-files.html#r-config-files"><i class="fa fa-check"></i><b>17.2</b> R config files</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="config-files.html"><a href="config-files.html#rprofile"><i class="fa fa-check"></i><b>17.2.1</b> <code>~/.Rprofile</code></a></li>
<li class="chapter" data-level="17.2.2" data-path="config-files.html"><a href="config-files.html#renviron"><i class="fa fa-check"></i><b>17.2.2</b> <code>~/.Renviron</code></a></li>
<li class="chapter" data-level="17.2.3" data-path="config-files.html"><a href="config-files.html#rmakevars"><i class="fa fa-check"></i><b>17.2.3</b> <code>~/.R/Makevars</code></a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="config-files.html"><a href="config-files.html#git-config-files"><i class="fa fa-check"></i><b>17.3</b> Git config files</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="config-files.html"><a href="config-files.html#gitconfig"><i class="fa fa-check"></i><b>17.3.1</b> <code>~/.gitconfig</code></a></li>
<li class="chapter" data-level="17.3.2" data-path="config-files.html"><a href="config-files.html#gitignore_global"><i class="fa fa-check"></i><b>17.3.2</b> <code>~/.gitignore_global</code></a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="config-files.html"><a href="config-files.html#jhpce-files"><i class="fa fa-check"></i><b>17.4</b> JHPCE files</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="config-files.html"><a href="config-files.html#sge_request"><i class="fa fa-check"></i><b>17.4.1</b> <code>~/.sge_request</code></a></li>
<li class="chapter" data-level="17.4.2" data-path="config-files.html"><a href="config-files.html#bashrc"><i class="fa fa-check"></i><b>17.4.2</b> <code>~/.bashrc</code></a></li>
<li class="chapter" data-level="17.4.3" data-path="config-files.html"><a href="config-files.html#bash_profile"><i class="fa fa-check"></i><b>17.4.3</b> <code>~/.bash_profile</code></a></li>
<li class="chapter" data-level="17.4.4" data-path="config-files.html"><a href="config-files.html#inputrc"><i class="fa fa-check"></i><b>17.4.4</b> <code>~/.inputrc</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="how-to-contribute.html"><a href="how-to-contribute.html"><i class="fa fa-check"></i><b>18</b> How to contribute</a>
<ul>
<li class="chapter" data-level="18.1" data-path="how-to-contribute.html"><a href="how-to-contribute.html#github-issues-1"><i class="fa fa-check"></i><b>18.1</b> GitHub Issues</a></li>
<li class="chapter" data-level="18.2" data-path="how-to-contribute.html"><a href="how-to-contribute.html#team-websites"><i class="fa fa-check"></i><b>18.2</b> Team websites</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="how-to-contribute.html"><a href="how-to-contribute.html#libd-rstats-club-website"><i class="fa fa-check"></i><b>18.2.1</b> LIBD rstats club website</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="how-to-contribute.html"><a href="how-to-contribute.html#github-actions"><i class="fa fa-check"></i><b>18.3</b> GitHub Actions</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="how-to-contribute.html"><a href="how-to-contribute.html#r-packages-1"><i class="fa fa-check"></i><b>18.3.1</b> R packages</a></li>
<li class="chapter" data-level="18.3.2" data-path="how-to-contribute.html"><a href="how-to-contribute.html#websites"><i class="fa fa-check"></i><b>18.3.2</b> Websites</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="how-to-contribute.html"><a href="how-to-contribute.html#libd-rbioconductor-packages"><i class="fa fa-check"></i><b>18.4</b> LIBD R/Bioconductor packages</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="career-growth.html"><a href="career-growth.html"><i class="fa fa-check"></i><b>19</b> Career growth</a>
<ul>
<li class="chapter" data-level="19.1" data-path="career-growth.html"><a href="career-growth.html#resources"><i class="fa fa-check"></i><b>19.1</b> Resources</a></li>
<li class="chapter" data-level="19.2" data-path="career-growth.html"><a href="career-growth.html#career-planning-session"><i class="fa fa-check"></i><b>19.2</b> Career planning session</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="project-code-handoff-checks.html"><a href="project-code-handoff-checks.html"><i class="fa fa-check"></i><b>20</b> Project code handoff checks</a></li>
<li class="chapter" data-level="" data-path="r-session-information-1.html"><a href="r-session-information-1.html"><i class="fa fa-check"></i>R session information</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R/Bioconductor-powered Team Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="organizing-your-work" class="section level1 hasAnchor" number="14">
<h1><span class="header-section-number">14</span> Organizing your work<a href="organizing-your-work.html#organizing-your-work" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In the team anonymous survey from 2021-03 <a href="https://lcolladotor.github.io/team_surveys/survey-2021-03.html#how-easy-is-it-easy-to-locate-things-in-at-jhpce-github">several responses</a> revealed that as a team we have some work to do to be more organized at JHPCE / GitHub as well in documenting our work. This chapter attempts to clarify what you can do to get feedback.</p>
<div id="jhpce-file-organization" class="section level2 hasAnchor" number="14.1">
<h2><span class="header-section-number">14.1</span> JHPCE file organization<a href="organizing-your-work.html#jhpce-file-organization" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="background-history" class="section level3 hasAnchor" number="14.1.1">
<h3><span class="header-section-number">14.1.1</span> Background history<a href="organizing-your-work.html#background-history" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As noted the the survey mentioned earlier, files at JHPCE could be organized better. We have multiple disks at JHPCE and for historical reasons, some projects live at locations such as <code>/dcl01/lieber/ajaffe/lab</code> and similar directories such as <code>/dcl01/lieber/ajaffe/lab/brainseq_phase2</code>, while other projects live inside directories named after individuals such as <code>/dcl01/lieber/ajaffe/Nick</code>. Thus, this makes it challenging to locate all the projects.</p>
<p>Even after re-organizing files, we’ll have multiple “group home” directories given that we have multiple disks and no disk is large enough to store all the data.</p>
<p>JHPCE admins send quarterly invoices that keeps track of expenses in two ways:</p>
<ul>
<li>for storage, it computes the size of the main paths such as <code>/dcl01/lieber/ajaffe</code></li>
<li>for compute hours, they keep track of the memory and compute hours used by each each individual for each compute node queue (namely, <code>shared</code> and <code>bluejay</code>)</li>
</ul>
<p>In 2021, we started to re-organize files as JHPCE’s admins now compute storage 1 level deeper than they used to, such as <code>/dcl01/lieber/ajaffe/dir01</code> and <code>/dcl01/lieber/ajaffe/dir02</code>. The idea is that this extra level of information enables LIBD Finance to have more detailed information on which grant or project code to charge for the different storage costs we incur at JHPCE. We also want to avoid personal directories, thus the “group home” directories will become the root for each disk such as <code>/dcl01/lieber/ajaffe/</code>. Overall, this new organization can help us identify old data that could be deleted.</p>
<p>Another issue we have with the current file organization at JHPCE is that we don’t know which data has to be backed up and which doesn’t. Files can be classified into:</p>
<ul>
<li><code>raw-data</code>: FASTQ, images, sample phenotype tables, etc</li>
<li><code>code</code>: ideally version-controlled through GitHub</li>
<li><code>processed-data</code>: files generated by running some code on the raw-data or other processed data</li>
</ul>
</div>
<div id="organization-since-2021" class="section level3 hasAnchor" number="14.1.2">
<h3><span class="header-section-number">14.1.2</span> Organization since 2021<a href="organizing-your-work.html#organization-since-2021" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Thus the new organization is like this.</p>
<pre><code>jhpce $ tree -a
.
├── group_home_disk1
│   └── projectName_grantNumber/repositoryName
│       ├── .git
│       ├── .gitignore
│       ├── README.md
│       ├── code
│       │   ├── run_all.sh
│       │   ├── update_style.R
│       │   ├── 01_some_analysis
│       │   │   ├── 01_some_code.R
│       │   │   └── 02_more_code.sh
│       │   ├── 02_another_analysis
│       │   │   ├── 01_initial_code.R
│       │   │   └── 02_plot_hello.R
│       │   └── 03_image_processing
│       │       └── 01_img_process.sh
│       ├── plots
│       │   └── 02_another_analysis
│       │       └── hello.pdf
│       ├── processed-data
│       │   ├── 01_some_analysis
│       │   │   └── some_file.Rdata
│       │   ├── 02_another_analysis
│       │   │   └── some_data.Rdata
│       │   └── 03_image_processing
│       │       ├── sample1_processed.tiff
│       │       └── sample2_processed.tiff
│       ├── repositoryName.Rproj
│       └── raw-data
│           ├── FASTQ
│           │   ├── sample1.fastq.gz
│           │   └── sample2.fastq.gz
│           ├── README.md
│           ├── images
│           │   ├── sample1_raw.tiff
│           │   └── sample2_raw.tiff
│           └── sample_phenotype.csv
└── group_home_disk2
    ├── backup_projectName_grantNumber/repositoryName
    │   ├── code
    │   ├── plots
    │   ├── processed-data
    │   └── raw-data
    ├── projectHello_grantRANDOM14515
    └── projectTest_grantRANDOM0123

24 directories, 19 files</code></pre>
<p>In this example, <code>/group_home_disk1/projectName_grantNumber</code> has been backed up across JHPCE disks to <code>/group_home_disk2/backup_projectName_grantNumber</code>. Not shown in this view above, the backup will not be group-writable unlike the original location. For some projects we might just backup the <code>raw-data</code>, for others we’ll back up the <code>code</code>, <code>plots</code> and <code>processed-data</code>. <code>/group_home_disk2</code> also contains it’s own unique projects that are not backed up at <code>/group_home_disk1</code> (<code>projectHello_grantRANDOM14515</code> and <code>projectTest_grantRANDOM0123</code>).</p>
<p><code>/group_home_disk1/projectName_grantNumber</code> has several components.</p>
<ul>
<li><code>.git</code>: it is version controlled at that level using Git.</li>
<li><code>.gitignore</code>: specifies what files to ignore. Typically, <code>raw-data</code> and <code>processed-data</code>. It could also ignore <code>plots</code> though smaller plots could be version controlled using <code>git add -f</code> (<code>-f</code> forces Git to version that file even if it’s ignored in a <code>.gitignore</code> file).</li>
<li><code>README.md</code>: describes the project and some main features of the project. It should include the JHPCE location for the project as noted in the project documentation further below.</li>
<li><code>code</code>: contains directories that are ordered by using a two digit leading ID (or three if the project is huge).
<ul>
<li><code>01_some_analysis</code> and <code>02_another_analysis</code>: contain scripts also using a two digit leading ID to help organize the files in the order they should be used for re-generating the processed data and plots.</li>
</ul></li>
<li><code>plots</code>: contains a directory matching the directory names used in <code>code</code> such that it is clear what code generate what plot. Here for <code>plots/02_another_analysis/hello.pdf</code> we can identify that the code for this plot lives at <code>code/02_another_analysis/02_plot_hello.R</code>.</li>
<li><code>processed-data</code>: also contains a directory matching the directory names used in <code>code</code>.</li>
<li><code>raw-data</code>: contains the raw data for the project. If the raw data is backed up elsewhere, then we can use symbolic links to point to the location of the data. For example, <code>/group_home_disk1/projectName_grantNumber/repositoryName/raw-data/FASTQ</code> could be a soft link to <code>/dcl02/lieber/ajaffe/Nina/Joel_R01/Year1/fastq</code>. This will be helpful to differentiate what is the raw data our group is responsible for backing up against the raw data the LIBD RNA-seq core facility or other entities are responsible for backing up. It also contains the sample phenotype information such as <code>/group_home_disk1/projectName_grantNumber/repositoryName/raw-data/sample_phenotype.csv</code> that is required for any analyses of the raw data.</li>
<li><code>repositoryName</code>.Rproj` an RStudio project file, which makes it easier to write R code.</li>
</ul>
<p>The project organization detailed shown above enables us to write code inside a project in such a way that if the disk where we store the project changes, none of the code has to change. That’s because we can use the <code>here</code> package as illustrated in the 2020-04-17 LIBD rstats club session (<a href="https://docs.google.com/document/d/1oAW3z9eo0LRAPeEqqm4VyPfOz8NF0vhfd76jwcJkkog/edit?usp=sharing">notes</a>).</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/XTuJ8vGnzBU" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
</div>
<div id="project-template" class="section level3 hasAnchor" number="14.1.3">
<h3><span class="header-section-number">14.1.3</span> Project template<a href="organizing-your-work.html#project-template" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You might be interested in checking out the <a href="https://github.com/LieberInstitute/template_project"><strong>template_project</strong></a>, which shows these organization guidelines in action.</p>
<p>Some current examples are:</p>
<ul>
<li><a href="https://github.com/LieberInstitute/ranger_metrics">LieberInstitute/ranger_metrics</a></li>
<li><a href="https://github.com/LieberInstitute/Visium_IF_AD">LieberInstitute/Visium_IF_AD</a></li>
<li><a href="https://github.com/LieberInstitute/DLPFC_snRNAseq">LieberInstitute/DLPFC_snRNAseq</a></li>
<li><a href="https://github.com/LieberInstitute/spatialDLPFC">LieberInstitute/spatialDLPFC</a></li>
</ul>
</div>
</div>
<div id="project-documentation" class="section level2 hasAnchor" number="14.2">
<h2><span class="header-section-number">14.2</span> Project documentation<a href="organizing-your-work.html#project-documentation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As a minimum, each project should include a <code>README.md</code> file in the root folder for the project, such as <code>/group_home_disk1/projectName_grantNumber/repositoryName/README.md</code>. This <code>README.md</code> should include the following sections:</p>
<ul>
<li>title</li>
<li>abstract / summary</li>
<li>how to cite the project</li>
<li>overview of the files and how they are organized</li>
<li>internal notes
<ul>
<li>JHPCE internal location</li>
<li>Slack channel</li>
<li>Any internal reminders, like setting the <code>umask</code></li>
</ul></li>
</ul>
<p>Additionally, nested directories could have their own <code>README.md</code> files. For example, <code>/group_home_disk1/projectName_grantNumber/repositoryName/raw-data/README.md</code> is one such <code>README.md</code> file which can describe where the raw-data has been backed up, such as saying “The raw data has been backed up at <code>/group_home_disk2/backup_projectName_grantNumber/repositoryName/raw-data</code> as of 2021-04-16.”. Other <code>README.md</code> files could show can show results such as <a href="https://github.com/LieberInstitute/brainseq_phase2/tree/master/check_noQsva">this example from <code>brainseq_phase2</code></a>.</p>
<p>If the project is quite big, it might make sense to make a documentation website such as the one we made for <a href="http://research.libd.org/SPEAQeasy/"><code>SPEAQeasy</code></a>. The advantage of such websites is that they enable visitors to search and locate information more rapidly. Though they take longer to write.</p>
</div>
<div id="setting-jhpce-file-permissions" class="section level2 hasAnchor" number="14.3">
<h2><span class="header-section-number">14.3</span> Setting JHPCE file permissions<a href="organizing-your-work.html#setting-jhpce-file-permissions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The following video on how to move files and setup permissions might be useful. It covers the same material shown here.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Y7fFLX3fw9A" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p>At <a href="http://www.jhpce.jhu.edu/">JHPCE</a> we have multiple user groups. Everyone within a user group has the same permissions, such that everyone is equal. That is, there is no user group admin role. As there are many JHPCE users, the typical approach is to make a user group and restrict read and/or write access to that user group. We use to do this with <code>lieber_jaffe</code>, but then the user group grew quite large over time and not everyone necessarily should have had read/write access to everything.</p>
<p>This leads to having multiple user groups. One option is to create a user group for every specific project, but this requires constantly asking JHPCE’s admins (through BitSupport) for changes, since they are the only ones who can add/remove people to user groups, or even create them.</p>
<p>This is where <em>Access Control Lists</em> (ACLs) come into play. See <a href="https://www.redhat.com/sysadmin/linux-access-control-lists">“An introduction to Linux Access Control Lists (ACLs)”</a> for more details. That’s because if you have user groups that are small, such as those representing specific members of a given team/lab, then you say that</p>
<ul>
<li>team 1 should be given write and read access to project 1</li>
<li>teams 1 and 2 should be given write and read access to project 2</li>
<li>teams 1 and 2 should be given write and read access to project 3 and team 3 only given read access</li>
</ul>
<p>Some examples with actual teams are:</p>
<ul>
<li>Team (user group) <code>lieber_lcolladotor</code> is working on a private project.</li>
<li>Team (user group) <code>lieber_lcolladotor</code> is working on a private project along with team (user group) <code>lieber_marmaypag</code>.</li>
<li>Teams (user groups) <code>lieber_lcolladotor</code> and <code>lieber_marmaypag</code> created some files that we want to share with everyone at LIBD (<code>lieber</code> user group) but don’t want others to accidentally delete or modify them.</li>
</ul>
<p>For more details about ACLs at JHPCE check the <a href="https://jhpce.jhu.edu/knowledge-base/granting-permissions-using-acls/">Granting File Permissions using ACLs</a> page.</p>
<div id="useful-commands" class="section level3 hasAnchor" number="14.3.1">
<h3><span class="header-section-number">14.3.1</span> Useful commands<a href="organizing-your-work.html#useful-commands" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To check who belongs to a specific group, use <code>getent group groupName</code>. For example:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="organizing-your-work.html#cb6-1" tabindex="-1"></a><span class="ex">$</span> getent group lieber_lcolladotor</span>
<span id="cb6-2"><a href="organizing-your-work.html#cb6-2" tabindex="-1"></a><span class="ex">lieber_lcolladotor:*:4217:jstolz,aseyedia,neagles,lcollado,gpertea1,lhuuki,bpardo</span></span></code></pre></div>
<p>Note that <code>4217</code> is the actual user group ID. Sometimes we need to know that ID to run some ACL commands.</p>
<p>To find all the user groups for a specific person, use the <code>groups</code> command. For example:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="organizing-your-work.html#cb7-1" tabindex="-1"></a><span class="ex">$</span> groups lcollado</span>
<span id="cb7-2"><a href="organizing-your-work.html#cb7-2" tabindex="-1"></a><span class="ex">lcollado</span> : lieber_jaffe swdev leekgroup recount3 lieber docker lieber_lcolladotor epi stanley rnaseq lieber_marmaypag lieber_snps lieber_martinowich users libdandme lieber_cmc lieber_gursini lieber_moods</span></code></pre></div>
</div>
<div id="dcs04-scripts" class="section level3 hasAnchor" number="14.3.2">
<h3><span class="header-section-number">14.3.2</span> dcs04 scripts<a href="organizing-your-work.html#dcs04-scripts" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>At <code>/dcs04</code>, we use the <code>nfs4_setfacl</code> and <code>nfs4_getfacl</code> commands to either set or get (list) the current ACL settings. This is different from the commands we use at <code>/dcl01</code> or other disks, and depends on how JHPCE’s admins configured specific disks. You might find <a href="https://lists.johnshopkins.edu/sympa/arc/bithelp/2021-06/msg00004.html">this email exchange</a> I had with JHPCE’s admins in 2021 useful to understand more details about these commands.</p>
<p>Ultimately, my exchanges with JHPCE’s admins led to two scripts we use frequently when setting file permissions. One of them is for the collaboration between <code>lieber_lcolladotor</code>, <code>lieber_marmaypag</code> and <code>hickslab</code>. The second one is for a collaboration between <code>lieber_lcolladotor</code> and <code>lieber_moods</code>, that we want <code>lieber</code> to be able to see. The files are:</p>
<ul>
<li><code>/dcs04/lieber/lcolladotor/_jhpce_org_LIBD001/update_permissions_spatialteam.sh</code>
<ul>
<li>Usage: <code>sh /dcs04/lieber/lcolladotor/_jhpce_org_LIBD001/update_permissions_spatialteam.sh /dcs04/lieber/yourTeam/someProject_LIBDcode/yourRepository</code></li>
</ul></li>
<li><code>/dcs04/lieber/lcolladotor/_jhpce_org_LIBD001/update_permissions_moods.sh</code>
<ul>
<li>Usage: <code>sh /dcs04/lieber/lcolladotor/_jhpce_org_LIBD001/update_permissions_moods.sh /dcs04/lieber/yourTeam/someProject_LIBDcode/yourRepository</code></li>
</ul></li>
</ul>
<p>A very <strong>common problem arises from copying files to JHPCE</strong> (for example, through Cyberduck), as copying files doesn’t respect the ACL settings we specify. This also happens when you move file around at JHPCE using <code>mv</code> that already existed. So after uploading a file or moving it with <code>mv</code>, you will likely need to re-run these permission scripts.</p>
<div id="spatialteam-example" class="section level4 hasAnchor" number="14.3.2.1">
<h4><span class="header-section-number">14.3.2.1</span> spatialteam example<a href="organizing-your-work.html#spatialteam-example" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><code>/dcs04/lieber/lcolladotor/_jhpce_org_LIBD001/update_permissions_spatialteam.sh</code></li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="organizing-your-work.html#cb8-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb8-2"><a href="organizing-your-work.html#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="organizing-your-work.html#cb8-3" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;**** Updating permissions for </span><span class="va">$1</span><span class="st"> ****&quot;</span></span>
<span id="cb8-4"><a href="organizing-your-work.html#cb8-4" tabindex="-1"></a><span class="fu">date</span></span>
<span id="cb8-5"><a href="organizing-your-work.html#cb8-5" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb8-6"><a href="organizing-your-work.html#cb8-6" tabindex="-1"></a></span>
<span id="cb8-7"><a href="organizing-your-work.html#cb8-7" tabindex="-1"></a><span class="cf">if</span> <span class="kw">[[</span> <span class="va">$HOSTNAME</span> <span class="ot">==</span> compute-<span class="pp">*</span> <span class="kw">]]</span> <span class="kw">||</span> <span class="kw">[[</span> <span class="va">$HOSTNAME</span> <span class="ot">==</span> transfer-<span class="pp">*</span> <span class="kw">]];</span> <span class="cf">then</span></span>
<span id="cb8-8"><a href="organizing-your-work.html#cb8-8" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;**** Note that warning/error messages are expected for files and directories that you are not the owner of.&quot;</span></span>
<span id="cb8-9"><a href="organizing-your-work.html#cb8-9" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;The expected warning/error messages are: &quot;</span></span>
<span id="cb8-10"><a href="organizing-your-work.html#cb8-10" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;    &#39;chgrp: changing group of ‘some_JHPCE_file_path’: Operation not permitted&#39;&quot;</span></span>
<span id="cb8-11"><a href="organizing-your-work.html#cb8-11" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot; or &#39;chmod: changing permissions of ‘some_JHPCE_file_path’: Operation not permitted&#39;.&quot;</span></span>
<span id="cb8-12"><a href="organizing-your-work.html#cb8-12" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;If for many files you are not the owner (creator of), you will get lots of these warning/error messages, this is expected!&quot;</span></span>
<span id="cb8-13"><a href="organizing-your-work.html#cb8-13" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;Error or warnings with another syntax are likely real. ****&quot;</span></span>
<span id="cb8-14"><a href="organizing-your-work.html#cb8-14" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb8-15"><a href="organizing-your-work.html#cb8-15" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;You will need to re-run this script anytime you upload files to JHPCE through Cyberduck / WinSCP as they break the ACLs.&quot;</span></span>
<span id="cb8-16"><a href="organizing-your-work.html#cb8-16" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;Every new team member on a given project will likely also need to run this script once.&quot;</span></span>
<span id="cb8-17"><a href="organizing-your-work.html#cb8-17" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb8-18"><a href="organizing-your-work.html#cb8-18" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;For more details about setting permissions at JHPCE using ACLs, please check https://lcolladotor.github.io/bioc_team_ds/organizing-your-work.html#setting-jhpce-file-permissions.&quot;</span></span>
<span id="cb8-19"><a href="organizing-your-work.html#cb8-19" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb8-20"><a href="organizing-your-work.html#cb8-20" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;This message will be displayed for 90 seconds before the script proceeds.&quot;</span></span>
<span id="cb8-21"><a href="organizing-your-work.html#cb8-21" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;That way you will have time enough to read it and/or copy it.&quot;</span></span>
<span id="cb8-22"><a href="organizing-your-work.html#cb8-22" tabindex="-1"></a>    <span class="fu">sleep</span> 90</span>
<span id="cb8-23"><a href="organizing-your-work.html#cb8-23" tabindex="-1"></a>    </span>
<span id="cb8-24"><a href="organizing-your-work.html#cb8-24" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb8-25"><a href="organizing-your-work.html#cb8-25" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;**** Setting read (R), write (W), and execute (X) permissions for hickslab ****&quot;</span></span>
<span id="cb8-26"><a href="organizing-your-work.html#cb8-26" tabindex="-1"></a>    <span class="fu">sleep</span> 5</span>
<span id="cb8-27"><a href="organizing-your-work.html#cb8-27" tabindex="-1"></a>    <span class="fu">date</span></span>
<span id="cb8-28"><a href="organizing-your-work.html#cb8-28" tabindex="-1"></a>    </span>
<span id="cb8-29"><a href="organizing-your-work.html#cb8-29" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:g:hickslab@cm.cluster:RWX&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb8-30"><a href="organizing-your-work.html#cb8-30" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:gfdi:hickslab@cm.cluster:RWX&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb8-31"><a href="organizing-your-work.html#cb8-31" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> f <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:g:hickslab@cm.cluster:RW&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb8-32"><a href="organizing-your-work.html#cb8-32" tabindex="-1"></a>    </span>
<span id="cb8-33"><a href="organizing-your-work.html#cb8-33" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb8-34"><a href="organizing-your-work.html#cb8-34" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;**** Setting read (R), write (W), and execute (X) permissions for lieber_lcolladotor ****&quot;</span></span>
<span id="cb8-35"><a href="organizing-your-work.html#cb8-35" tabindex="-1"></a>    <span class="fu">sleep</span> 5</span>
<span id="cb8-36"><a href="organizing-your-work.html#cb8-36" tabindex="-1"></a>    <span class="fu">date</span></span>
<span id="cb8-37"><a href="organizing-your-work.html#cb8-37" tabindex="-1"></a>    </span>
<span id="cb8-38"><a href="organizing-your-work.html#cb8-38" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:g:lieber_lcolladotor@cm.cluster:RWX&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb8-39"><a href="organizing-your-work.html#cb8-39" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:gfdi:lieber_lcolladotor@cm.cluster:RWX&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb8-40"><a href="organizing-your-work.html#cb8-40" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> f <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:g:lieber_lcolladotor@cm.cluster:RW&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb8-41"><a href="organizing-your-work.html#cb8-41" tabindex="-1"></a>    </span>
<span id="cb8-42"><a href="organizing-your-work.html#cb8-42" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb8-43"><a href="organizing-your-work.html#cb8-43" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;**** Setting read (R), write (W), and execute (X) permissions for lieber_marmaypag ****&quot;</span></span>
<span id="cb8-44"><a href="organizing-your-work.html#cb8-44" tabindex="-1"></a>    <span class="fu">sleep</span> 5</span>
<span id="cb8-45"><a href="organizing-your-work.html#cb8-45" tabindex="-1"></a>    <span class="fu">date</span></span>
<span id="cb8-46"><a href="organizing-your-work.html#cb8-46" tabindex="-1"></a>    </span>
<span id="cb8-47"><a href="organizing-your-work.html#cb8-47" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:g:lieber_marmaypag@cm.cluster:RWX&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb8-48"><a href="organizing-your-work.html#cb8-48" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:gfdi:lieber_marmaypag@cm.cluster:RWX&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb8-49"><a href="organizing-your-work.html#cb8-49" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> f <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:g:lieber_marmaypag@cm.cluster:RW&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb8-50"><a href="organizing-your-work.html#cb8-50" tabindex="-1"></a>    </span>
<span id="cb8-51"><a href="organizing-your-work.html#cb8-51" tabindex="-1"></a>    <span class="co">## To move away from lieber_jaffe</span></span>
<span id="cb8-52"><a href="organizing-your-work.html#cb8-52" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb8-53"><a href="organizing-your-work.html#cb8-53" tabindex="-1"></a>    <span class="cf">if</span> <span class="fu">getent</span> group lieber_lcolladotor <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-q</span> <span class="st">&quot;\b</span><span class="va">${USER}</span><span class="st">\b&quot;</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb8-54"><a href="organizing-your-work.html#cb8-54" tabindex="-1"></a>        <span class="bu">echo</span> <span class="st">&quot;**** Running chgrp lieber_lcolladotor ****&quot;</span></span>
<span id="cb8-55"><a href="organizing-your-work.html#cb8-55" tabindex="-1"></a>        <span class="fu">sleep</span> 5</span>
<span id="cb8-56"><a href="organizing-your-work.html#cb8-56" tabindex="-1"></a>        <span class="fu">date</span></span>
<span id="cb8-57"><a href="organizing-your-work.html#cb8-57" tabindex="-1"></a>        <span class="fu">chgrp</span> lieber_lcolladotor <span class="at">-R</span> <span class="va">${1}</span></span>
<span id="cb8-58"><a href="organizing-your-work.html#cb8-58" tabindex="-1"></a>    <span class="cf">elif</span> <span class="fu">getent</span> group lieber_marmaypag <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-q</span> <span class="st">&quot;\b</span><span class="va">${USER}</span><span class="st">\b&quot;</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb8-59"><a href="organizing-your-work.html#cb8-59" tabindex="-1"></a>        <span class="bu">echo</span> <span class="st">&quot;**** Running chgrp lieber_marmaypag ****&quot;</span></span>
<span id="cb8-60"><a href="organizing-your-work.html#cb8-60" tabindex="-1"></a>        <span class="fu">sleep</span> 5</span>
<span id="cb8-61"><a href="organizing-your-work.html#cb8-61" tabindex="-1"></a>        <span class="fu">date</span></span>
<span id="cb8-62"><a href="organizing-your-work.html#cb8-62" tabindex="-1"></a>        <span class="fu">chgrp</span> lieber_marmaypag <span class="at">-R</span> <span class="va">${1}</span></span>
<span id="cb8-63"><a href="organizing-your-work.html#cb8-63" tabindex="-1"></a>    <span class="cf">elif</span> <span class="fu">getent</span> group hickslab <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-q</span> <span class="st">&quot;\b</span><span class="va">${USER}</span><span class="st">\b&quot;</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb8-64"><a href="organizing-your-work.html#cb8-64" tabindex="-1"></a>        <span class="bu">echo</span> <span class="st">&quot;**** Running chgrp hickslab ****&quot;</span></span>
<span id="cb8-65"><a href="organizing-your-work.html#cb8-65" tabindex="-1"></a>        <span class="fu">sleep</span> 5</span>
<span id="cb8-66"><a href="organizing-your-work.html#cb8-66" tabindex="-1"></a>        <span class="fu">date</span></span>
<span id="cb8-67"><a href="organizing-your-work.html#cb8-67" tabindex="-1"></a>        <span class="fu">chgrp</span> hickslab <span class="at">-R</span> <span class="va">${1}</span></span>
<span id="cb8-68"><a href="organizing-your-work.html#cb8-68" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb8-69"><a href="organizing-your-work.html#cb8-69" tabindex="-1"></a>        <span class="bu">echo</span> <span class="st">&quot;**** Skipping chgrp step ****&quot;</span></span>
<span id="cb8-70"><a href="organizing-your-work.html#cb8-70" tabindex="-1"></a>    <span class="cf">fi</span></span>
<span id="cb8-71"><a href="organizing-your-work.html#cb8-71" tabindex="-1"></a>    </span>
<span id="cb8-72"><a href="organizing-your-work.html#cb8-72" tabindex="-1"></a>    <span class="co">## For setting the group sticky bit</span></span>
<span id="cb8-73"><a href="organizing-your-work.html#cb8-73" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb8-74"><a href="organizing-your-work.html#cb8-74" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;**** Setting the group sticky bit ****&quot;</span></span>
<span id="cb8-75"><a href="organizing-your-work.html#cb8-75" tabindex="-1"></a>    <span class="fu">sleep</span> 5</span>
<span id="cb8-76"><a href="organizing-your-work.html#cb8-76" tabindex="-1"></a>    <span class="fu">date</span></span>
<span id="cb8-77"><a href="organizing-your-work.html#cb8-77" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> d <span class="kw">|</span> <span class="fu">xargs</span> chmod g+s</span>
<span id="cb8-78"><a href="organizing-your-work.html#cb8-78" tabindex="-1"></a>    </span>
<span id="cb8-79"><a href="organizing-your-work.html#cb8-79" tabindex="-1"></a>    <span class="co">## Check settings</span></span>
<span id="cb8-80"><a href="organizing-your-work.html#cb8-80" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb8-81"><a href="organizing-your-work.html#cb8-81" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;**** Checking the nfs4 (ACLs) settings ****&quot;</span></span>
<span id="cb8-82"><a href="organizing-your-work.html#cb8-82" tabindex="-1"></a>    <span class="fu">sleep</span> 5</span>
<span id="cb8-83"><a href="organizing-your-work.html#cb8-83" tabindex="-1"></a>    <span class="fu">date</span></span>
<span id="cb8-84"><a href="organizing-your-work.html#cb8-84" tabindex="-1"></a>    <span class="ex">nfs4_getfacl</span> <span class="va">${1}</span></span>
<span id="cb8-85"><a href="organizing-your-work.html#cb8-85" tabindex="-1"></a><span class="cf">else</span></span>
<span id="cb8-86"><a href="organizing-your-work.html#cb8-86" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;**** This script can only work on a qrsh / qsub session. It does not work on a login node since it does not have access to the nfs4_setfacl and nfs4_getfacl commands.****&quot;</span></span>
<span id="cb8-87"><a href="organizing-your-work.html#cb8-87" tabindex="-1"></a><span class="cf">fi</span></span></code></pre></div>
</div>
<div id="lieber_moods-example" class="section level4 hasAnchor" number="14.3.2.2">
<h4><span class="header-section-number">14.3.2.2</span> lieber_moods example<a href="organizing-your-work.html#lieber_moods-example" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><code>/dcs04/lieber/lcolladotor/_jhpce_org_LIBD001/update_permissions_moods.sh</code></li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="organizing-your-work.html#cb9-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb9-2"><a href="organizing-your-work.html#cb9-2" tabindex="-1"></a></span>
<span id="cb9-3"><a href="organizing-your-work.html#cb9-3" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;**** Updating permissions for </span><span class="va">$1</span><span class="st"> ****&quot;</span></span>
<span id="cb9-4"><a href="organizing-your-work.html#cb9-4" tabindex="-1"></a><span class="fu">date</span></span>
<span id="cb9-5"><a href="organizing-your-work.html#cb9-5" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb9-6"><a href="organizing-your-work.html#cb9-6" tabindex="-1"></a></span>
<span id="cb9-7"><a href="organizing-your-work.html#cb9-7" tabindex="-1"></a><span class="cf">if</span> <span class="kw">[[</span> <span class="va">$HOSTNAME</span> <span class="ot">==</span> compute-<span class="pp">*</span> <span class="kw">]]</span> <span class="kw">||</span> <span class="kw">[[</span> <span class="va">$HOSTNAME</span> <span class="ot">==</span> transfer-<span class="pp">*</span> <span class="kw">]];</span> <span class="cf">then</span></span>
<span id="cb9-8"><a href="organizing-your-work.html#cb9-8" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;**** Note that warning/error messages are expected for files and directories that you are not the owner of.&quot;</span></span>
<span id="cb9-9"><a href="organizing-your-work.html#cb9-9" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;The expected warning/error messages are: &quot;</span></span>
<span id="cb9-10"><a href="organizing-your-work.html#cb9-10" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;    &#39;chgrp: changing group of ‘some_JHPCE_file_path’: Operation not permitted&#39;&quot;</span></span>
<span id="cb9-11"><a href="organizing-your-work.html#cb9-11" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot; or &#39;chmod: changing permissions of ‘some_JHPCE_file_path’: Operation not permitted&#39;.&quot;</span></span>
<span id="cb9-12"><a href="organizing-your-work.html#cb9-12" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;If for many files you are not the owner (creator of), you will get lots of these warning/error messages, this is expected!&quot;</span></span>
<span id="cb9-13"><a href="organizing-your-work.html#cb9-13" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;Error or warnings with another syntax are likely real. ****&quot;</span></span>
<span id="cb9-14"><a href="organizing-your-work.html#cb9-14" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb9-15"><a href="organizing-your-work.html#cb9-15" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;You will need to re-run this script anytime you upload files to JHPCE through Cyberduck / WinSCP as they break the ACLs.&quot;</span></span>
<span id="cb9-16"><a href="organizing-your-work.html#cb9-16" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;Every new team member on a given project will likely also need to run this script once.&quot;</span></span>
<span id="cb9-17"><a href="organizing-your-work.html#cb9-17" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb9-18"><a href="organizing-your-work.html#cb9-18" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;For more details about setting permissions at JHPCE using ACLs, please check https://lcolladotor.github.io/bioc_team_ds/organizing-your-work.html#setting-jhpce-file-permissions.&quot;</span></span>
<span id="cb9-19"><a href="organizing-your-work.html#cb9-19" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb9-20"><a href="organizing-your-work.html#cb9-20" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;This message will be displayed for 90 seconds before the script proceeds.&quot;</span></span>
<span id="cb9-21"><a href="organizing-your-work.html#cb9-21" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;That way you will have time enough to read it and/or copy it.&quot;</span></span>
<span id="cb9-22"><a href="organizing-your-work.html#cb9-22" tabindex="-1"></a>    <span class="fu">sleep</span> 90</span>
<span id="cb9-23"><a href="organizing-your-work.html#cb9-23" tabindex="-1"></a>    </span>
<span id="cb9-24"><a href="organizing-your-work.html#cb9-24" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb9-25"><a href="organizing-your-work.html#cb9-25" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;**** Setting read (R), write (W), and execute (X) permissions for lieber_moods ****&quot;</span></span>
<span id="cb9-26"><a href="organizing-your-work.html#cb9-26" tabindex="-1"></a>    <span class="fu">sleep</span> 5</span>
<span id="cb9-27"><a href="organizing-your-work.html#cb9-27" tabindex="-1"></a>    <span class="fu">date</span></span>
<span id="cb9-28"><a href="organizing-your-work.html#cb9-28" tabindex="-1"></a></span>
<span id="cb9-29"><a href="organizing-your-work.html#cb9-29" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:g:lieber_moods@cm.cluster:RWX&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb9-30"><a href="organizing-your-work.html#cb9-30" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:gfdi:lieber_moods@cm.cluster:RWX&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb9-31"><a href="organizing-your-work.html#cb9-31" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> f <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:g:lieber_moods@cm.cluster:RW&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb9-32"><a href="organizing-your-work.html#cb9-32" tabindex="-1"></a>    </span>
<span id="cb9-33"><a href="organizing-your-work.html#cb9-33" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb9-34"><a href="organizing-your-work.html#cb9-34" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;**** Setting read (R), write (W), and execute (X) permissions for lieber_lcolladotor ****&quot;</span></span>
<span id="cb9-35"><a href="organizing-your-work.html#cb9-35" tabindex="-1"></a>    <span class="fu">sleep</span> 5</span>
<span id="cb9-36"><a href="organizing-your-work.html#cb9-36" tabindex="-1"></a>    <span class="fu">date</span></span>
<span id="cb9-37"><a href="organizing-your-work.html#cb9-37" tabindex="-1"></a>    </span>
<span id="cb9-38"><a href="organizing-your-work.html#cb9-38" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:g:lieber_lcolladotor@cm.cluster:RWX&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb9-39"><a href="organizing-your-work.html#cb9-39" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:gfdi:lieber_lcolladotor@cm.cluster:RWX&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb9-40"><a href="organizing-your-work.html#cb9-40" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> f <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:g:lieber_lcolladotor@cm.cluster:RW&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb9-41"><a href="organizing-your-work.html#cb9-41" tabindex="-1"></a>    </span>
<span id="cb9-42"><a href="organizing-your-work.html#cb9-42" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;&quot;</span> </span>
<span id="cb9-43"><a href="organizing-your-work.html#cb9-43" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;**** Setting read (R) and execute (X) permissions for lieber ****&quot;</span></span>
<span id="cb9-44"><a href="organizing-your-work.html#cb9-44" tabindex="-1"></a>    <span class="fu">sleep</span> 5</span>
<span id="cb9-45"><a href="organizing-your-work.html#cb9-45" tabindex="-1"></a>    <span class="fu">date</span></span>
<span id="cb9-46"><a href="organizing-your-work.html#cb9-46" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:g:lieber@cm.cluster:RX&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb9-47"><a href="organizing-your-work.html#cb9-47" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:gfdi:lieber@cm.cluster:RX&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb9-48"><a href="organizing-your-work.html#cb9-48" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> f <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:g:lieber@cm.cluster:R&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb9-49"><a href="organizing-your-work.html#cb9-49" tabindex="-1"></a>    </span>
<span id="cb9-50"><a href="organizing-your-work.html#cb9-50" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;&quot;</span> </span>
<span id="cb9-51"><a href="organizing-your-work.html#cb9-51" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;**** Removing permissions for lieber_marmaypag ****&quot;</span></span>
<span id="cb9-52"><a href="organizing-your-work.html#cb9-52" tabindex="-1"></a>    <span class="fu">sleep</span> 5</span>
<span id="cb9-53"><a href="organizing-your-work.html#cb9-53" tabindex="-1"></a>    <span class="fu">date</span></span>
<span id="cb9-54"><a href="organizing-your-work.html#cb9-54" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-x</span> <span class="st">&quot;A:g:lieber_marmaypag@cm.cluster:rwaDxtcy&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb9-55"><a href="organizing-your-work.html#cb9-55" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-x</span> <span class="st">&quot;A:gfdi:lieber_marmaypag@cm.cluster:rwaDxtcy&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb9-56"><a href="organizing-your-work.html#cb9-56" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> f <span class="at">-exec</span> nfs4_setfacl <span class="at">-x</span> <span class="st">&quot;A:g:lieber_marmaypag@cm.cluster:rwatcy&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb9-57"><a href="organizing-your-work.html#cb9-57" tabindex="-1"></a></span>
<span id="cb9-58"><a href="organizing-your-work.html#cb9-58" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-x</span> <span class="st">&quot;A:g:4218:rwaDxtcy&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb9-59"><a href="organizing-your-work.html#cb9-59" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-x</span> <span class="st">&quot;A:gfdi:4218:rwaDxtcy&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb9-60"><a href="organizing-your-work.html#cb9-60" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> f <span class="at">-exec</span> nfs4_setfacl <span class="at">-x</span> <span class="st">&quot;A:g:4218:rwatcy&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb9-61"><a href="organizing-your-work.html#cb9-61" tabindex="-1"></a>    </span>
<span id="cb9-62"><a href="organizing-your-work.html#cb9-62" tabindex="-1"></a>    <span class="co">## To move away from lieber_jaffe</span></span>
<span id="cb9-63"><a href="organizing-your-work.html#cb9-63" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb9-64"><a href="organizing-your-work.html#cb9-64" tabindex="-1"></a>    <span class="cf">if</span> <span class="fu">getent</span> group lieber_moods <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-q</span> <span class="st">&quot;\b</span><span class="va">${USER}</span><span class="st">\b&quot;</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb9-65"><a href="organizing-your-work.html#cb9-65" tabindex="-1"></a>        <span class="bu">echo</span> <span class="st">&quot;**** Running chgrp lieber_moods ****&quot;</span></span>
<span id="cb9-66"><a href="organizing-your-work.html#cb9-66" tabindex="-1"></a>        <span class="fu">sleep</span> 5</span>
<span id="cb9-67"><a href="organizing-your-work.html#cb9-67" tabindex="-1"></a>        <span class="fu">date</span></span>
<span id="cb9-68"><a href="organizing-your-work.html#cb9-68" tabindex="-1"></a>        <span class="fu">chgrp</span> lieber_moods <span class="at">-R</span> <span class="va">${1}</span></span>
<span id="cb9-69"><a href="organizing-your-work.html#cb9-69" tabindex="-1"></a>    <span class="cf">elif</span> <span class="fu">getent</span> group lieber_lcolladotor <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-q</span> <span class="st">&quot;\b</span><span class="va">${USER}</span><span class="st">\b&quot;</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb9-70"><a href="organizing-your-work.html#cb9-70" tabindex="-1"></a>        <span class="bu">echo</span> <span class="st">&quot;**** Running chgrp lieber_lcolladotor ****&quot;</span></span>
<span id="cb9-71"><a href="organizing-your-work.html#cb9-71" tabindex="-1"></a>        <span class="fu">sleep</span> 5</span>
<span id="cb9-72"><a href="organizing-your-work.html#cb9-72" tabindex="-1"></a>        <span class="fu">date</span></span>
<span id="cb9-73"><a href="organizing-your-work.html#cb9-73" tabindex="-1"></a>        <span class="fu">chgrp</span> lieber_lcolladotor <span class="at">-R</span> <span class="va">${1}</span></span>
<span id="cb9-74"><a href="organizing-your-work.html#cb9-74" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb9-75"><a href="organizing-your-work.html#cb9-75" tabindex="-1"></a>        <span class="bu">echo</span> <span class="st">&quot;**** Skipping chgrp step ****&quot;</span></span>
<span id="cb9-76"><a href="organizing-your-work.html#cb9-76" tabindex="-1"></a>    <span class="cf">fi</span></span>
<span id="cb9-77"><a href="organizing-your-work.html#cb9-77" tabindex="-1"></a>    </span>
<span id="cb9-78"><a href="organizing-your-work.html#cb9-78" tabindex="-1"></a>    <span class="co">## For setting the group sticky bit</span></span>
<span id="cb9-79"><a href="organizing-your-work.html#cb9-79" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb9-80"><a href="organizing-your-work.html#cb9-80" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;**** Setting the group sticky bit ****&quot;</span></span>
<span id="cb9-81"><a href="organizing-your-work.html#cb9-81" tabindex="-1"></a>    <span class="fu">sleep</span> 5</span>
<span id="cb9-82"><a href="organizing-your-work.html#cb9-82" tabindex="-1"></a>    <span class="fu">date</span></span>
<span id="cb9-83"><a href="organizing-your-work.html#cb9-83" tabindex="-1"></a>    <span class="fu">find</span> <span class="va">${1}</span> <span class="at">-user</span> <span class="va">${USER}</span> <span class="at">-type</span> d <span class="kw">|</span> <span class="fu">xargs</span> chmod g+s</span>
<span id="cb9-84"><a href="organizing-your-work.html#cb9-84" tabindex="-1"></a>    </span>
<span id="cb9-85"><a href="organizing-your-work.html#cb9-85" tabindex="-1"></a>    <span class="co">## Check settings</span></span>
<span id="cb9-86"><a href="organizing-your-work.html#cb9-86" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb9-87"><a href="organizing-your-work.html#cb9-87" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;**** Checking the nfs4 (ACLs) settings ****&quot;</span></span>
<span id="cb9-88"><a href="organizing-your-work.html#cb9-88" tabindex="-1"></a>    <span class="fu">sleep</span> 5</span>
<span id="cb9-89"><a href="organizing-your-work.html#cb9-89" tabindex="-1"></a>    <span class="fu">date</span></span>
<span id="cb9-90"><a href="organizing-your-work.html#cb9-90" tabindex="-1"></a>    <span class="ex">nfs4_getfacl</span> <span class="va">${1}</span></span>
<span id="cb9-91"><a href="organizing-your-work.html#cb9-91" tabindex="-1"></a><span class="cf">else</span></span>
<span id="cb9-92"><a href="organizing-your-work.html#cb9-92" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;**** This script can only work on a qrsh / qsub session. It does not work on a login node since it does not have access to the nfs4_setfacl and nfs4_getfacl commands.****&quot;</span></span>
<span id="cb9-93"><a href="organizing-your-work.html#cb9-93" tabindex="-1"></a><span class="cf">fi</span></span></code></pre></div>
</div>
</div>
</div>
<div id="moving-files-across-jhpce-disks" class="section level2 hasAnchor" number="14.4">
<h2><span class="header-section-number">14.4</span> Moving files across JHPCE disks<a href="organizing-your-work.html#moving-files-across-jhpce-disks" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>When you are moving files from other disks into <code>/dcs04</code>, you will likely need up to 4 files:</p>
<ul>
<li>one file listing the directories you want to move
<ul>
<li>Optional, but useful if you are moving one that one directory into a particular destination directory and want to use a single <em>array</em> job for moving the directories.</li>
</ul></li>
<li>one script for moving files to <code>/dcs04</code> with <code>rsync</code>
<ul>
<li>We don’t use <code>mv</code> since it’s error prone and can have terrible consequences when it fails mid run.</li>
</ul></li>
<li>one script for updating the permissions
<ul>
<li>Even if the script simply runs one of the permissions scripts covered in the earlier section, you might want to have a script you can <code>qsub</code> as scripts that update permissions for many files can take hours to run.</li>
</ul></li>
<li>one script for deleting the original files
<ul>
<li>You will likely want to wait a few days / weeks before running this, to make sure that you have successfully moved everything you needed.</li>
<li>If you don’t have write permissions to all the original files, you will need to request JHPCE’s admins to run this for you.</li>
</ul></li>
</ul>
<div id="qsva-example" class="section level3 hasAnchor" number="14.4.1">
<h3><span class="header-section-number">14.4.1</span> qSVA example<a href="organizing-your-work.html#qsva-example" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this example, we moved 3 different <code>/dcl01</code> directories into <code>/dcs04</code>, hence the use of an array job. These 3 directories were all related to the qSVA R21 project that had the internal LIBD code 3080, hence why all of them were relocated to <code>/dcs04/lieber/lcolladotor/qSVA_LIBD3080</code>. To store the scripts and log files associated with the relocation, I used the <code>_jhpce_org</code> directory which I typically use for storing these types of files.</p>
<p>We also wanted to list the owners of all original files (thanks Bill Ulrich for this code!) since sometimes having the owner is useful to know who to ask for help with a particular file.</p>
<p><code>/dcs04/lieber/lcolladotor/qSVA_LIBD3080/_jhpce_org</code> files:</p>
<ul>
<li><code>qSVA_dcl01_dirs.txt</code></li>
</ul>
<p>It contains the full paths to the 3 original directories that were relocated.</p>
<pre><code>/dcl01/ajaffe/data/lab/degradation
/dcl01/ajaffe/data/lab/qsva_brain
/dcl01/lieber/ajaffe/lab/degradation_experiments</code></pre>
<ul>
<li><code>move_qSVA_dcl01.sh</code></li>
</ul>
<p>It’s an array job for 3 tasks which represent the directories (<code>#$ -t 1:3</code>). Note the increase of the maximum file size (<code>h_fsize=400G</code>), in case we are moving some very large files. To reduce the burden on the network, we only copied 2 directories at a time (<code>#$ -tc 2</code>; number of concurrent tasks).</p>
<p>Before transferring all the data, we compute the total data size (in TB) of the transfer. We use the <code>-sk --apparent-size</code> options to the <code>du</code> command in order to compute the un-compressed disk size, since some disk systems automatically compress some files, which can lead to different file size calculations across disk systems.</p>
<p>Once we have listed the owner of all files, we then move the files using <code>rsync</code> which will not preserve the original owner. The owner of all the transferred files (at <code>/dcs04</code>) will be the person who did the transfer. While doing this, we also change the unix group to the new one we want people to use. In this case, <code>lieber_lcolladotor</code> (the original files were most likely under <code>lieber_jaffe</code>). A nice thing about using <code>rsync</code> is that if it fails in the middle of a run, it can be resumed without problems later on.</p>
<p>Once we have completed the transfer across disks, we move the original files using <code>mv</code> to a <code>trash</code> directory (here <code>trash_qSVA</code>). This frees up the original directory name, which we can then use to create a soft link from the original location to the new location. Creating this soft link (symlink) helps users of the original files locate these files even if we moved them across disks (assuming they still have permissions to read the new files).</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="organizing-your-work.html#cb11-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb11-2"><a href="organizing-your-work.html#cb11-2" tabindex="-1"></a><span class="co">#$ -cwd</span></span>
<span id="cb11-3"><a href="organizing-your-work.html#cb11-3" tabindex="-1"></a><span class="co">#$ -l bluejay,mem_free=2G,h_vmem=2G,h_fsize=400G</span></span>
<span id="cb11-4"><a href="organizing-your-work.html#cb11-4" tabindex="-1"></a><span class="co">#$ -N move_qSVA_dcl01</span></span>
<span id="cb11-5"><a href="organizing-your-work.html#cb11-5" tabindex="-1"></a><span class="co">#$ -o logs/move_qSVA_dcl01.$TASK_ID.txt</span></span>
<span id="cb11-6"><a href="organizing-your-work.html#cb11-6" tabindex="-1"></a><span class="co">#$ -e logs/move_qSVA_dcl01.$TASK_ID.txt</span></span>
<span id="cb11-7"><a href="organizing-your-work.html#cb11-7" tabindex="-1"></a><span class="co">#$ -m e</span></span>
<span id="cb11-8"><a href="organizing-your-work.html#cb11-8" tabindex="-1"></a><span class="co">#$ -t 1-3</span></span>
<span id="cb11-9"><a href="organizing-your-work.html#cb11-9" tabindex="-1"></a><span class="co">#$ -tc 2</span></span>
<span id="cb11-10"><a href="organizing-your-work.html#cb11-10" tabindex="-1"></a></span>
<span id="cb11-11"><a href="organizing-your-work.html#cb11-11" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;**** Job starts ****&quot;</span></span>
<span id="cb11-12"><a href="organizing-your-work.html#cb11-12" tabindex="-1"></a><span class="fu">date</span></span>
<span id="cb11-13"><a href="organizing-your-work.html#cb11-13" tabindex="-1"></a></span>
<span id="cb11-14"><a href="organizing-your-work.html#cb11-14" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;**** JHPCE info ****&quot;</span></span>
<span id="cb11-15"><a href="organizing-your-work.html#cb11-15" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;User: </span><span class="va">${USER}</span><span class="st">&quot;</span></span>
<span id="cb11-16"><a href="organizing-your-work.html#cb11-16" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Job id: </span><span class="va">${JOB_ID}</span><span class="st">&quot;</span></span>
<span id="cb11-17"><a href="organizing-your-work.html#cb11-17" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Job name: </span><span class="va">${JOB_NAME}</span><span class="st">&quot;</span></span>
<span id="cb11-18"><a href="organizing-your-work.html#cb11-18" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Hostname: </span><span class="va">${HOSTNAME}</span><span class="st">&quot;</span></span>
<span id="cb11-19"><a href="organizing-your-work.html#cb11-19" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Task id: </span><span class="va">${SGE_TASK_ID}</span><span class="st">&quot;</span></span>
<span id="cb11-20"><a href="organizing-your-work.html#cb11-20" tabindex="-1"></a></span>
<span id="cb11-21"><a href="organizing-your-work.html#cb11-21" tabindex="-1"></a><span class="co">## List current modules for reproducibility</span></span>
<span id="cb11-22"><a href="organizing-your-work.html#cb11-22" tabindex="-1"></a><span class="ex">module</span> list</span>
<span id="cb11-23"><a href="organizing-your-work.html#cb11-23" tabindex="-1"></a></span>
<span id="cb11-24"><a href="organizing-your-work.html#cb11-24" tabindex="-1"></a><span class="co">## Locate directory</span></span>
<span id="cb11-25"><a href="organizing-your-work.html#cb11-25" tabindex="-1"></a><span class="va">ORIGINALDIR</span><span class="op">=</span><span class="va">$(</span><span class="fu">awk</span> <span class="st">&quot;NR==</span><span class="va">${SGE_TASK_ID}</span><span class="st">&quot;</span> qSVA_dcl01_dirs.txt<span class="va">)</span></span>
<span id="cb11-26"><a href="organizing-your-work.html#cb11-26" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Processing sample </span><span class="va">${ORIGINALDIR}</span><span class="st">&quot;</span></span>
<span id="cb11-27"><a href="organizing-your-work.html#cb11-27" tabindex="-1"></a><span class="fu">date</span></span>
<span id="cb11-28"><a href="organizing-your-work.html#cb11-28" tabindex="-1"></a></span>
<span id="cb11-29"><a href="organizing-your-work.html#cb11-29" tabindex="-1"></a><span class="va">BASEDIR</span><span class="op">=</span><span class="va">$(</span><span class="fu">basename</span> <span class="va">${ORIGINALDIR})</span></span>
<span id="cb11-30"><a href="organizing-your-work.html#cb11-30" tabindex="-1"></a><span class="va">ORIGINALHOME</span><span class="op">=</span><span class="va">$(</span><span class="fu">dirname</span> <span class="va">${ORIGINALDIR})</span></span>
<span id="cb11-31"><a href="organizing-your-work.html#cb11-31" tabindex="-1"></a></span>
<span id="cb11-32"><a href="organizing-your-work.html#cb11-32" tabindex="-1"></a><span class="co">## Determine amount of data to transfer</span></span>
<span id="cb11-33"><a href="organizing-your-work.html#cb11-33" tabindex="-1"></a><span class="fu">du</span> <span class="at">-sk</span> <span class="at">--apparent-size</span> <span class="va">${ORIGINALDIR}</span>/ <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{$1=$1/(1024^3); print $1, &quot;TB&quot;;}&#39;</span></span>
<span id="cb11-34"><a href="organizing-your-work.html#cb11-34" tabindex="-1"></a></span>
<span id="cb11-35"><a href="organizing-your-work.html#cb11-35" tabindex="-1"></a><span class="co">## List owners of all the files in the original path</span></span>
<span id="cb11-36"><a href="organizing-your-work.html#cb11-36" tabindex="-1"></a><span class="fu">find</span> <span class="va">${ORIGINALDIR}</span>/ <span class="at">-exec</span> ls <span class="at">-l</span> {} <span class="dt">\;</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-v</span> total <span class="kw">|</span> <span class="fu">tr</span> <span class="at">-s</span> <span class="st">&#39; &#39;</span> <span class="kw">|</span> <span class="fu">cut</span> <span class="at">-d</span> <span class="st">&#39; &#39;</span> <span class="at">-f3,9-</span></span>
<span id="cb11-37"><a href="organizing-your-work.html#cb11-37" tabindex="-1"></a></span>
<span id="cb11-38"><a href="organizing-your-work.html#cb11-38" tabindex="-1"></a><span class="co">## Copy from dcl01 to dcs04</span></span>
<span id="cb11-39"><a href="organizing-your-work.html#cb11-39" tabindex="-1"></a><span class="fu">rsync</span> <span class="at">-rltgvh</span> <span class="at">--chown</span><span class="op">=</span>:lieber_lcolladotor <span class="va">${ORIGINALDIR}</span>/ /dcs04/lieber/lcolladotor/qSVA_LIBD3080/<span class="va">${BASEDIR}</span>/</span>
<span id="cb11-40"><a href="organizing-your-work.html#cb11-40" tabindex="-1"></a></span>
<span id="cb11-41"><a href="organizing-your-work.html#cb11-41" tabindex="-1"></a><span class="co">## Label as trash the files that were moved</span></span>
<span id="cb11-42"><a href="organizing-your-work.html#cb11-42" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> <span class="va">${ORIGINALHOME}</span>/trash_qSVA/</span>
<span id="cb11-43"><a href="organizing-your-work.html#cb11-43" tabindex="-1"></a><span class="fu">mv</span> <span class="va">${ORIGINALDIR}</span> <span class="va">${ORIGINALHOME}</span>/trash_qSVA/</span>
<span id="cb11-44"><a href="organizing-your-work.html#cb11-44" tabindex="-1"></a></span>
<span id="cb11-45"><a href="organizing-your-work.html#cb11-45" tabindex="-1"></a><span class="co">## Create link</span></span>
<span id="cb11-46"><a href="organizing-your-work.html#cb11-46" tabindex="-1"></a><span class="fu">ln</span> <span class="at">-s</span> /dcs04/lieber/lcolladotor/qSVA_LIBD3080/<span class="va">${BASEDIR}</span> <span class="va">${ORIGINALDIR}</span></span>
<span id="cb11-47"><a href="organizing-your-work.html#cb11-47" tabindex="-1"></a></span>
<span id="cb11-48"><a href="organizing-your-work.html#cb11-48" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;**** Job ends ****&quot;</span></span>
<span id="cb11-49"><a href="organizing-your-work.html#cb11-49" tabindex="-1"></a><span class="fu">date</span></span>
<span id="cb11-50"><a href="organizing-your-work.html#cb11-50" tabindex="-1"></a></span>
<span id="cb11-51"><a href="organizing-your-work.html#cb11-51" tabindex="-1"></a><span class="co">## This script was made using sgejobs version 0.99.1</span></span>
<span id="cb11-52"><a href="organizing-your-work.html#cb11-52" tabindex="-1"></a><span class="co">## available from http://research.libd.org/sgejobs/</span></span></code></pre></div>
<ul>
<li><code>update_permissions.sh</code></li>
</ul>
<p>By default, directories under <code>/dcs04/lieber/lcolladotor</code> have read, write and execute permissions to the <code>lieber_marmaypag</code> group. Here though, we first remove the permissions to <code>lieber_marmaypag</code>, then we give read and execute permissions to both the <code>lieber</code> and <code>lieber_marmaypag</code> unix user groups.</p>
<p>We (redundantly) set the group of all files to be <code>lieber_lcolladotor</code> and then set the <em>group sticky bit</em> which preserves the group (<code>lieber_lcolladotor</code> in this case) to any new files created within these directories. Finally, we use <code>nfs4_getfacl</code> to check that the ACLs were set up correctly.</p>
<p>Note how we use <code>#$ -hold_jid</code> with the same name of the script from the <em>move</em> step earlier (here <code>move_qSVA_dcl01</code>) so we can <code>qsub</code> this script immediately after the <em>move</em> one, but wait for them to finish running before this one starts.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="organizing-your-work.html#cb12-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb12-2"><a href="organizing-your-work.html#cb12-2" tabindex="-1"></a><span class="co">#$ -cwd</span></span>
<span id="cb12-3"><a href="organizing-your-work.html#cb12-3" tabindex="-1"></a><span class="co">#$ -l bluejay,mem_free=2G,h_vmem=2G,h_fsize=400G</span></span>
<span id="cb12-4"><a href="organizing-your-work.html#cb12-4" tabindex="-1"></a><span class="co">#$ -N update_permissions_qSVA</span></span>
<span id="cb12-5"><a href="organizing-your-work.html#cb12-5" tabindex="-1"></a><span class="co">#$ -o logs/update_permissions.txt</span></span>
<span id="cb12-6"><a href="organizing-your-work.html#cb12-6" tabindex="-1"></a><span class="co">#$ -e logs/update_permissions.txt</span></span>
<span id="cb12-7"><a href="organizing-your-work.html#cb12-7" tabindex="-1"></a><span class="co">#$ -m e</span></span>
<span id="cb12-8"><a href="organizing-your-work.html#cb12-8" tabindex="-1"></a><span class="co">#$ -hold_jid move_qSVA_dcl01</span></span>
<span id="cb12-9"><a href="organizing-your-work.html#cb12-9" tabindex="-1"></a></span>
<span id="cb12-10"><a href="organizing-your-work.html#cb12-10" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;**** Job starts ****&quot;</span></span>
<span id="cb12-11"><a href="organizing-your-work.html#cb12-11" tabindex="-1"></a><span class="fu">date</span></span>
<span id="cb12-12"><a href="organizing-your-work.html#cb12-12" tabindex="-1"></a></span>
<span id="cb12-13"><a href="organizing-your-work.html#cb12-13" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;**** JHPCE info ****&quot;</span></span>
<span id="cb12-14"><a href="organizing-your-work.html#cb12-14" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;User: </span><span class="va">${USER}</span><span class="st">&quot;</span></span>
<span id="cb12-15"><a href="organizing-your-work.html#cb12-15" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Job id: </span><span class="va">${JOB_ID}</span><span class="st">&quot;</span></span>
<span id="cb12-16"><a href="organizing-your-work.html#cb12-16" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Job name: </span><span class="va">${JOB_NAME}</span><span class="st">&quot;</span></span>
<span id="cb12-17"><a href="organizing-your-work.html#cb12-17" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Hostname: </span><span class="va">${HOSTNAME}</span><span class="st">&quot;</span></span>
<span id="cb12-18"><a href="organizing-your-work.html#cb12-18" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Task id: </span><span class="va">${SGE_TASK_ID}</span><span class="st">&quot;</span></span>
<span id="cb12-19"><a href="organizing-your-work.html#cb12-19" tabindex="-1"></a></span>
<span id="cb12-20"><a href="organizing-your-work.html#cb12-20" tabindex="-1"></a><span class="co">## List current modules for reproducibility</span></span>
<span id="cb12-21"><a href="organizing-your-work.html#cb12-21" tabindex="-1"></a><span class="ex">module</span> list</span>
<span id="cb12-22"><a href="organizing-your-work.html#cb12-22" tabindex="-1"></a></span>
<span id="cb12-23"><a href="organizing-your-work.html#cb12-23" tabindex="-1"></a></span>
<span id="cb12-24"><a href="organizing-your-work.html#cb12-24" tabindex="-1"></a><span class="va">MAINDIR</span><span class="op">=</span><span class="st">&quot;/dcs04/lieber/lcolladotor/qSVA_LIBD3080&quot;</span></span>
<span id="cb12-25"><a href="organizing-your-work.html#cb12-25" tabindex="-1"></a></span>
<span id="cb12-26"><a href="organizing-your-work.html#cb12-26" tabindex="-1"></a><span class="co">## Remove default permissions</span></span>
<span id="cb12-27"><a href="organizing-your-work.html#cb12-27" tabindex="-1"></a><span class="fu">find</span> <span class="va">${MAINDIR}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-x</span> <span class="st">&quot;A:g:lieber_marmaypag@cm.cluster:rwaDxtcy&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb12-28"><a href="organizing-your-work.html#cb12-28" tabindex="-1"></a><span class="fu">find</span> <span class="va">${MAINDIR}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-x</span> <span class="st">&quot;A:gfdi:lieber_marmaypag@cm.cluster:rwaDxtcy&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb12-29"><a href="organizing-your-work.html#cb12-29" tabindex="-1"></a><span class="fu">find</span> <span class="va">${MAINDIR}</span> <span class="at">-type</span> f <span class="at">-exec</span> nfs4_setfacl <span class="at">-x</span> <span class="st">&quot;A:g:lieber_marmaypag@cm.cluster:rwatcy&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb12-30"><a href="organizing-your-work.html#cb12-30" tabindex="-1"></a></span>
<span id="cb12-31"><a href="organizing-your-work.html#cb12-31" tabindex="-1"></a><span class="co">## Set new permissions</span></span>
<span id="cb12-32"><a href="organizing-your-work.html#cb12-32" tabindex="-1"></a><span class="fu">find</span> <span class="va">${MAINDIR}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:g:lieber@cm.cluster:RX&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb12-33"><a href="organizing-your-work.html#cb12-33" tabindex="-1"></a><span class="fu">find</span> <span class="va">${MAINDIR}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:gfdi:lieber@cm.cluster:RX&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb12-34"><a href="organizing-your-work.html#cb12-34" tabindex="-1"></a><span class="fu">find</span> <span class="va">${MAINDIR}</span> <span class="at">-type</span> f <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:g:lieber@cm.cluster:R&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb12-35"><a href="organizing-your-work.html#cb12-35" tabindex="-1"></a></span>
<span id="cb12-36"><a href="organizing-your-work.html#cb12-36" tabindex="-1"></a><span class="fu">find</span> <span class="va">${MAINDIR}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:g:lieber_marmaypag@cm.cluster:RX&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb12-37"><a href="organizing-your-work.html#cb12-37" tabindex="-1"></a><span class="fu">find</span> <span class="va">${MAINDIR}</span> <span class="at">-type</span> d <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:gfdi:lieber_marmaypag@cm.cluster:RX&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb12-38"><a href="organizing-your-work.html#cb12-38" tabindex="-1"></a><span class="fu">find</span> <span class="va">${MAINDIR}</span> <span class="at">-type</span> f <span class="at">-exec</span> nfs4_setfacl <span class="at">-a</span> <span class="st">&quot;A:g:lieber_marmaypag@cm.cluster:R&quot;</span> {} <span class="dt">\;</span></span>
<span id="cb12-39"><a href="organizing-your-work.html#cb12-39" tabindex="-1"></a></span>
<span id="cb12-40"><a href="organizing-your-work.html#cb12-40" tabindex="-1"></a><span class="co">## To move away from lieber_jaffe</span></span>
<span id="cb12-41"><a href="organizing-your-work.html#cb12-41" tabindex="-1"></a><span class="fu">chgrp</span> lieber_lcolladotor <span class="at">-R</span> <span class="va">${MAINDIR}</span></span>
<span id="cb12-42"><a href="organizing-your-work.html#cb12-42" tabindex="-1"></a></span>
<span id="cb12-43"><a href="organizing-your-work.html#cb12-43" tabindex="-1"></a><span class="co">## For setting the group sticky bit</span></span>
<span id="cb12-44"><a href="organizing-your-work.html#cb12-44" tabindex="-1"></a><span class="fu">find</span> <span class="va">${MAINDIR}</span> <span class="at">-type</span> d <span class="kw">|</span> <span class="fu">xargs</span> chmod g+s</span>
<span id="cb12-45"><a href="organizing-your-work.html#cb12-45" tabindex="-1"></a></span>
<span id="cb12-46"><a href="organizing-your-work.html#cb12-46" tabindex="-1"></a><span class="co">## Check settings</span></span>
<span id="cb12-47"><a href="organizing-your-work.html#cb12-47" tabindex="-1"></a><span class="ex">nfs4_getfacl</span> <span class="va">${MAINDIR}</span></span>
<span id="cb12-48"><a href="organizing-your-work.html#cb12-48" tabindex="-1"></a></span>
<span id="cb12-49"><a href="organizing-your-work.html#cb12-49" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;**** Job ends ****&quot;</span></span>
<span id="cb12-50"><a href="organizing-your-work.html#cb12-50" tabindex="-1"></a><span class="fu">date</span></span>
<span id="cb12-51"><a href="organizing-your-work.html#cb12-51" tabindex="-1"></a></span>
<span id="cb12-52"><a href="organizing-your-work.html#cb12-52" tabindex="-1"></a><span class="co">## This script was made using sgejobs version 0.99.1</span></span>
<span id="cb12-53"><a href="organizing-your-work.html#cb12-53" tabindex="-1"></a><span class="co">## available from http://research.libd.org/sgejobs/</span></span></code></pre></div>
<ul>
<li><code>delete_qSVA_dcl01.sh</code></li>
</ul>
<p>This script also uses <code>#$ -hold_jid</code> so in theory we could submit it (<code>qsub</code>) immediately after the <em>move</em> script, however, it’s best to wait a few days or weeks before running the script that deletes the original files under <code>trash</code> (here <code>trash_qSVA</code>), to make sure that we are not missing any files or encountered unexpected scenarios when moving files across disks.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="organizing-your-work.html#cb13-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb13-2"><a href="organizing-your-work.html#cb13-2" tabindex="-1"></a><span class="co">#$ -cwd</span></span>
<span id="cb13-3"><a href="organizing-your-work.html#cb13-3" tabindex="-1"></a><span class="co">#$ -l bluejay,mem_free=2G,h_vmem=2G,h_fsize=100G</span></span>
<span id="cb13-4"><a href="organizing-your-work.html#cb13-4" tabindex="-1"></a><span class="co">#$ -N delete_qSVA_dcl01</span></span>
<span id="cb13-5"><a href="organizing-your-work.html#cb13-5" tabindex="-1"></a><span class="co">#$ -o logs/delete_qSVA_dcl01.txt</span></span>
<span id="cb13-6"><a href="organizing-your-work.html#cb13-6" tabindex="-1"></a><span class="co">#$ -e logs/delete_qSVA_dcl01.txt</span></span>
<span id="cb13-7"><a href="organizing-your-work.html#cb13-7" tabindex="-1"></a><span class="co">#$ -m e</span></span>
<span id="cb13-8"><a href="organizing-your-work.html#cb13-8" tabindex="-1"></a><span class="co">#$ -hold_jid move_qSVA_dcl01</span></span>
<span id="cb13-9"><a href="organizing-your-work.html#cb13-9" tabindex="-1"></a></span>
<span id="cb13-10"><a href="organizing-your-work.html#cb13-10" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;**** Job starts ****&quot;</span></span>
<span id="cb13-11"><a href="organizing-your-work.html#cb13-11" tabindex="-1"></a><span class="fu">date</span></span>
<span id="cb13-12"><a href="organizing-your-work.html#cb13-12" tabindex="-1"></a></span>
<span id="cb13-13"><a href="organizing-your-work.html#cb13-13" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;**** JHPCE info ****&quot;</span></span>
<span id="cb13-14"><a href="organizing-your-work.html#cb13-14" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;User: </span><span class="va">${USER}</span><span class="st">&quot;</span></span>
<span id="cb13-15"><a href="organizing-your-work.html#cb13-15" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Job id: </span><span class="va">${JOB_ID}</span><span class="st">&quot;</span></span>
<span id="cb13-16"><a href="organizing-your-work.html#cb13-16" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Job name: </span><span class="va">${JOB_NAME}</span><span class="st">&quot;</span></span>
<span id="cb13-17"><a href="organizing-your-work.html#cb13-17" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Hostname: </span><span class="va">${HOSTNAME}</span><span class="st">&quot;</span></span>
<span id="cb13-18"><a href="organizing-your-work.html#cb13-18" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Task id: </span><span class="va">${SGE_TASK_ID}</span><span class="st">&quot;</span></span>
<span id="cb13-19"><a href="organizing-your-work.html#cb13-19" tabindex="-1"></a></span>
<span id="cb13-20"><a href="organizing-your-work.html#cb13-20" tabindex="-1"></a><span class="co">## List current modules for reproducibility</span></span>
<span id="cb13-21"><a href="organizing-your-work.html#cb13-21" tabindex="-1"></a><span class="ex">module</span> list</span>
<span id="cb13-22"><a href="organizing-your-work.html#cb13-22" tabindex="-1"></a></span>
<span id="cb13-23"><a href="organizing-your-work.html#cb13-23" tabindex="-1"></a><span class="co">## Delete dcl01 data</span></span>
<span id="cb13-24"><a href="organizing-your-work.html#cb13-24" tabindex="-1"></a><span class="fu">rm</span> <span class="at">-fr</span> /dcl01/ajaffe/data/lab/trash_qSVA/</span>
<span id="cb13-25"><a href="organizing-your-work.html#cb13-25" tabindex="-1"></a><span class="fu">rm</span> <span class="at">-fr</span> /dcl01/lieber/ajaffe/lab/trash_qSVA/</span>
<span id="cb13-26"><a href="organizing-your-work.html#cb13-26" tabindex="-1"></a></span>
<span id="cb13-27"><a href="organizing-your-work.html#cb13-27" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;**** Job ends ****&quot;</span></span>
<span id="cb13-28"><a href="organizing-your-work.html#cb13-28" tabindex="-1"></a><span class="fu">date</span></span>
<span id="cb13-29"><a href="organizing-your-work.html#cb13-29" tabindex="-1"></a></span>
<span id="cb13-30"><a href="organizing-your-work.html#cb13-30" tabindex="-1"></a><span class="co">## This script was made using sgejobs version 0.99.1</span></span>
<span id="cb13-31"><a href="organizing-your-work.html#cb13-31" tabindex="-1"></a><span class="co">## available from http://research.libd.org/sgejobs/</span></span></code></pre></div>
</div>
<div id="humanpilot-example" class="section level3 hasAnchor" number="14.4.2">
<h3><span class="header-section-number">14.4.2</span> HumanPilot example<a href="organizing-your-work.html#humanpilot-example" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This is a simpler example, since we only moved one directory. So there’s no need for an array job or a file listing the directories we want to move. This project was done without any grant support, hence why we associated the LIBD 001 code to it. It was done in collaboration with 10x Genomics, hence why we decided to move it to <code>/dcs04/lieber/lcolladotor/with10x_LIBD001</code>. As in the previous example, I created a <code>_jhpce_org</code> directory to store the scripts related to relocating files and updating permissions. We also don’t have a script for deleting the files, since we knew that we didn’t have write permissions on all the original files and thus would need JHPCE’s admins help deleting them. This scenario is common when one or more people who were involved in the initial project leave LIBD prior to the file relocation, as you can’t ask them to run the <em>delete</em> script to delete the files they control. However, since we did have read access to all files, we were able to relocate them without needing JHPCE’s admins support.</p>
<p><code>/dcs04/lieber/lcolladotor/with10x_LIBD001/_jhpce_org</code> files:</p>
<ul>
<li><code>move_HumanPilot_dcl02.sh</code></li>
</ul>
<p>This script is similar to the qSVA example, but there is no array job. It was adapted from it, and thus we still specify the <code>ORIGINALDIR</code> environment variable, but we do it manually this time instead of using <code>awk</code> to do so.</p>
<p>Most of the rest is the same, but here the trash directory is just called <code>trash</code>, as it became easier to do so and explain to JHPCE admins which directories we wanted deleted later on.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="organizing-your-work.html#cb14-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb14-2"><a href="organizing-your-work.html#cb14-2" tabindex="-1"></a><span class="co">#$ -cwd</span></span>
<span id="cb14-3"><a href="organizing-your-work.html#cb14-3" tabindex="-1"></a><span class="co">#$ -l bluejay,mem_free=2G,h_vmem=2G,h_fsize=400G</span></span>
<span id="cb14-4"><a href="organizing-your-work.html#cb14-4" tabindex="-1"></a><span class="co">#$ -N move_HumanPilot_dcl02</span></span>
<span id="cb14-5"><a href="organizing-your-work.html#cb14-5" tabindex="-1"></a><span class="co">#$ -o logs/move_HumanPilot_dcl02.txt</span></span>
<span id="cb14-6"><a href="organizing-your-work.html#cb14-6" tabindex="-1"></a><span class="co">#$ -e logs/move_HumanPilot_dcl02.txt</span></span>
<span id="cb14-7"><a href="organizing-your-work.html#cb14-7" tabindex="-1"></a><span class="co">#$ -m e</span></span>
<span id="cb14-8"><a href="organizing-your-work.html#cb14-8" tabindex="-1"></a></span>
<span id="cb14-9"><a href="organizing-your-work.html#cb14-9" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;**** Job starts ****&quot;</span></span>
<span id="cb14-10"><a href="organizing-your-work.html#cb14-10" tabindex="-1"></a><span class="fu">date</span></span>
<span id="cb14-11"><a href="organizing-your-work.html#cb14-11" tabindex="-1"></a></span>
<span id="cb14-12"><a href="organizing-your-work.html#cb14-12" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;**** JHPCE info ****&quot;</span></span>
<span id="cb14-13"><a href="organizing-your-work.html#cb14-13" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;User: </span><span class="va">${USER}</span><span class="st">&quot;</span></span>
<span id="cb14-14"><a href="organizing-your-work.html#cb14-14" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Job id: </span><span class="va">${JOB_ID}</span><span class="st">&quot;</span></span>
<span id="cb14-15"><a href="organizing-your-work.html#cb14-15" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Job name: </span><span class="va">${JOB_NAME}</span><span class="st">&quot;</span></span>
<span id="cb14-16"><a href="organizing-your-work.html#cb14-16" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Hostname: </span><span class="va">${HOSTNAME}</span><span class="st">&quot;</span></span>
<span id="cb14-17"><a href="organizing-your-work.html#cb14-17" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Task id: </span><span class="va">${SGE_TASK_ID}</span><span class="st">&quot;</span></span>
<span id="cb14-18"><a href="organizing-your-work.html#cb14-18" tabindex="-1"></a></span>
<span id="cb14-19"><a href="organizing-your-work.html#cb14-19" tabindex="-1"></a><span class="co">## List current modules for reproducibility</span></span>
<span id="cb14-20"><a href="organizing-your-work.html#cb14-20" tabindex="-1"></a><span class="ex">module</span> list</span>
<span id="cb14-21"><a href="organizing-your-work.html#cb14-21" tabindex="-1"></a></span>
<span id="cb14-22"><a href="organizing-your-work.html#cb14-22" tabindex="-1"></a><span class="co">## Locate directory</span></span>
<span id="cb14-23"><a href="organizing-your-work.html#cb14-23" tabindex="-1"></a><span class="va">ORIGINALDIR</span><span class="op">=</span><span class="st">&quot;/dcl02/lieber/ajaffe/SpatialTranscriptomics/HumanPilot&quot;</span></span>
<span id="cb14-24"><a href="organizing-your-work.html#cb14-24" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Processing directory </span><span class="va">${ORIGINALDIR}</span><span class="st">&quot;</span></span>
<span id="cb14-25"><a href="organizing-your-work.html#cb14-25" tabindex="-1"></a><span class="fu">date</span></span>
<span id="cb14-26"><a href="organizing-your-work.html#cb14-26" tabindex="-1"></a></span>
<span id="cb14-27"><a href="organizing-your-work.html#cb14-27" tabindex="-1"></a><span class="va">BASEDIR</span><span class="op">=</span><span class="va">$(</span><span class="fu">basename</span> <span class="va">${ORIGINALDIR})</span></span>
<span id="cb14-28"><a href="organizing-your-work.html#cb14-28" tabindex="-1"></a><span class="va">ORIGINALHOME</span><span class="op">=</span><span class="va">$(</span><span class="fu">dirname</span> <span class="va">${ORIGINALDIR})</span></span>
<span id="cb14-29"><a href="organizing-your-work.html#cb14-29" tabindex="-1"></a><span class="va">NEWDIR</span><span class="op">=</span><span class="st">&quot;/dcs04/lieber/lcolladotor/with10x_LIBD001/</span><span class="va">${BASEDIR}</span><span class="st">&quot;</span></span>
<span id="cb14-30"><a href="organizing-your-work.html#cb14-30" tabindex="-1"></a></span>
<span id="cb14-31"><a href="organizing-your-work.html#cb14-31" tabindex="-1"></a><span class="co">## Determine amount of data to transfer</span></span>
<span id="cb14-32"><a href="organizing-your-work.html#cb14-32" tabindex="-1"></a><span class="fu">du</span> <span class="at">-sk</span> <span class="at">--apparent-size</span> <span class="va">${ORIGINALDIR}</span>/ <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{$1=$1/(1024^3); print $1, &quot;TB&quot;;}&#39;</span></span>
<span id="cb14-33"><a href="organizing-your-work.html#cb14-33" tabindex="-1"></a></span>
<span id="cb14-34"><a href="organizing-your-work.html#cb14-34" tabindex="-1"></a><span class="co">## List owners of all the files in the original path</span></span>
<span id="cb14-35"><a href="organizing-your-work.html#cb14-35" tabindex="-1"></a><span class="fu">find</span> <span class="va">${ORIGINALDIR}</span>/ <span class="at">-exec</span> ls <span class="at">-l</span> {} <span class="dt">\;</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-v</span> total <span class="kw">|</span> <span class="fu">tr</span> <span class="at">-s</span> <span class="st">&#39; &#39;</span> <span class="kw">|</span> <span class="fu">cut</span> <span class="at">-d</span> <span class="st">&#39; &#39;</span> <span class="at">-f3,9-</span></span>
<span id="cb14-36"><a href="organizing-your-work.html#cb14-36" tabindex="-1"></a></span>
<span id="cb14-37"><a href="organizing-your-work.html#cb14-37" tabindex="-1"></a><span class="co">## Copy from dcl02 to dcs04</span></span>
<span id="cb14-38"><a href="organizing-your-work.html#cb14-38" tabindex="-1"></a><span class="fu">rsync</span> <span class="at">-rltgvh</span> <span class="at">--chown</span><span class="op">=</span>:lieber_lcolladotor <span class="va">${ORIGINALDIR}</span>/ <span class="va">${NEWDIR}</span>/</span>
<span id="cb14-39"><a href="organizing-your-work.html#cb14-39" tabindex="-1"></a></span>
<span id="cb14-40"><a href="organizing-your-work.html#cb14-40" tabindex="-1"></a><span class="co">## Label as trash the files that were moved</span></span>
<span id="cb14-41"><a href="organizing-your-work.html#cb14-41" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> <span class="va">${ORIGINALHOME}</span>/trash/</span>
<span id="cb14-42"><a href="organizing-your-work.html#cb14-42" tabindex="-1"></a><span class="fu">mv</span> <span class="va">${ORIGINALDIR}</span> <span class="va">${ORIGINALHOME}</span>/trash/</span>
<span id="cb14-43"><a href="organizing-your-work.html#cb14-43" tabindex="-1"></a></span>
<span id="cb14-44"><a href="organizing-your-work.html#cb14-44" tabindex="-1"></a><span class="co">## Create link</span></span>
<span id="cb14-45"><a href="organizing-your-work.html#cb14-45" tabindex="-1"></a><span class="fu">ln</span> <span class="at">-s</span> <span class="va">${NEWDIR}</span> <span class="va">${ORIGINALDIR}</span></span>
<span id="cb14-46"><a href="organizing-your-work.html#cb14-46" tabindex="-1"></a></span>
<span id="cb14-47"><a href="organizing-your-work.html#cb14-47" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;**** Job ends ****&quot;</span></span>
<span id="cb14-48"><a href="organizing-your-work.html#cb14-48" tabindex="-1"></a><span class="fu">date</span></span>
<span id="cb14-49"><a href="organizing-your-work.html#cb14-49" tabindex="-1"></a></span>
<span id="cb14-50"><a href="organizing-your-work.html#cb14-50" tabindex="-1"></a><span class="co">## This script was made using sgejobs version 0.99.1</span></span>
<span id="cb14-51"><a href="organizing-your-work.html#cb14-51" tabindex="-1"></a><span class="co">## available from http://research.libd.org/sgejobs/</span></span></code></pre></div>
<ul>
<li><code>update_permissions.sh</code></li>
</ul>
<p>This is a much simpler bash script which we didn’t <code>qsub</code> and basically just reminds us of the specific command we used to update the permissions. That way, if anyone asks us what we ran in the future, we know exactly how we updated the permissions.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="organizing-your-work.html#cb15-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb15-2"><a href="organizing-your-work.html#cb15-2" tabindex="-1"></a></span>
<span id="cb15-3"><a href="organizing-your-work.html#cb15-3" tabindex="-1"></a><span class="fu">sh</span> /dcs04/lieber/lcolladotor/_jhpce_org_LIBD001/update_permissions_spatialteam.sh /dcs04/lieber/lcolladotor/with10x_LIBD001</span></code></pre></div>

</div>
</div>
</div>
<div class="container">
    <footer class="site-footer">

      <center>
<p class="powered-by">
© 2011-2023. All thoughts and opinions here are my own. The icon was designed by <a href="https://www.linkedin.com/in/mauricio-guzman-6529b551/">Mauricio Guzmán</a> and is inspired by <a href="https://en.wikipedia.org/wiki/Huichol">Huichol culture</a>; it represents my community building interests.
</p>

<p class="powered-by copyright-license-text">
This work is licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0" rel="noopener noreferrer" target="_blank">CC BY NC SA 4.0</a>
</p>

<p class="powered-by footer-license-icons">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0" rel="noopener noreferrer" target="_blank">
      <img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg" alt="CC icon" width="32px">
      <img src="https://mirrors.creativecommons.org/presskit/icons/by.svg" alt="CC by icon" width="32px">
      <img src="https://mirrors.creativecommons.org/presskit/icons/nc.svg" alt="CC NC icon" width="32px">
      <img src="https://mirrors.creativecommons.org/presskit/icons/sa.svg" alt="CC SA icon" width="32px">
    </a>
</p>

<div id="clustrmaps-widget"></div><script type='text/javascript' id='clustrmaps' src='//cdn.clustrmaps.com/map_v2.js?cl=ffffff&w=300&t=m&d=Zo-deincaJGsqhqjIWsujtdoNOMJsnnZLefKmxDKVv8&co=124b73&cmo=dd53ff&cmn=4ec724'></script>

<p class="powered-by">
Published with <a href="https://bookdown.org/" target="_blank" rel="noopener">Bookdown</a>
</p>

</center>



<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3CBVR6GQ07"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3CBVR6GQ07');
</script>

<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4ef23e545d41b87c"></script>

<script type="text/javascript">
var addthis_config = {
	data_ga_property: 'G-3CBVR6GQ07',
	data_ga_social : true,
	data_track_addressbar: true
};
var addthis_share = {
	// ... other options
	url_transforms : {
		shorten: {
			twitter: 'bitly'
		}
	},
	shorteners : {
		bitly : {}
	}
}
</script>

</footer>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="project-feedback.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="writing-papers.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
